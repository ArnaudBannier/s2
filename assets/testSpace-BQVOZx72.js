import"./modulepreload-polyfill-B5Qt9EMX.js";import{M as r}from"./mtl-colors-4SIkI_VP.js";import{S as h,a as v,j as y,C as u,J as f,K as b,t as g}from"./s2-playable-oj1sxusA.js";import{S as E}from"./s2-step-animator-BdDE_VNr.js";class P extends v{animator;constructor(t){super(t),this.camera.setExtents(8,4.5),this.camera.setRotationDeg(0),this.camera.setZoom(1),this.setViewportSize(640*1.5,360*1.5),this.animator=new E(this);const a=this.getWorldSpace();this.addFillRect().data.color.copy(y.lerp(r.GREY_8,r.GREY_9,.7)),this.showSpace(a,8,r.BLACK);const s=this.createSpace();s.setSpaceToParent(2,0,3,0,-1,-2),this.showSpace(s,1,r.BLUE);const o=this.createSpace();o.setSpaceToParent(1,-1,-3,1,1,0),this.showSpace(o,2,r.ORANGE);const i=this.createSpace();i.setSpaceToParent(0,-.5,4,1,1,2),this.showSpace(i,2,r.PINK);for(const c of[a,s,o,i]){const p=new u(this);p.setParent(this.getSVG()),p.data.fill.color.copy(r.CYAN),p.data.position.set(1,1,c),p.data.radius.set(.5,c);const S=new f;S.multiplyMatrices(this.viewSpace.getWorldToSpace(),c.getSpaceToWorld()),S.multiplyMatrices(S,this.viewSpace.getSpaceToWorld());const d=new u(this);d.setParent(this.getSVG()),d.data.stroke.color.copy(r.CYAN_1),d.data.stroke.width.set(4,this.getViewSpace()),d.data.fill.opacity.set(0),d.data.position.set(1,1,a),d.data.radius.set(.5,a),d.data.transform.set(S)}this.update()}showSpace(t,a,n){const s=new b(this);s.setParent(this.getSVG()),s.data.stroke.color.copy(n),s.data.geometry.boundA.set(-a,-a,t),s.data.geometry.boundB.set(+a,+a,t),s.data.geometry.steps.set(1,1,t),s.data.geometry.referencePoint.set(0,0,t),s.data.geometry.space.set(t);const o=new g(this);o.setParent(this.getSVG()),o.data.stroke.color.copy(r.RED),o.data.stroke.width.set(4,this.getViewSpace()),o.data.startPosition.set(0,0,t),o.data.endPosition.set(1,0,t),o.data.endPadding.set(5,this.getViewSpace()),o.createArrowTip().setAnchorAlignment(-1);const i=new g(this);i.setParent(this.getSVG()),i.data.stroke.color.copy(r.GREEN),i.data.stroke.width.set(4,this.getViewSpace()),i.data.startPosition.set(0,0,t),i.data.endPosition.set(0,1,t),i.data.endPadding.set(5,this.getViewSpace()),i.createArrowTip().setAnchorAlignment(-1);const c=new u(this);c.setParent(this.getSVG()),c.data.fill.color.copy(r.WHITE),c.data.position.set(0,0,t),c.data.radius.set(5,this.getViewSpace())}}const m=document.querySelector("#app");m&&(m.innerHTML=`
        <div>
            <h1>Changement d'espaces</h1>
            <svg xmlns="http://www.w3.org/2000/svg" id=test-svg class="responsive-svg" preserveAspectRatio="xMidYMid meet"></svg>
            <div class="figure-nav">
                <div>Animation : <input type="range" id="slider" min="0" max="100" step="1" value="0" style="width:50%"></div>
                <button id="reset-button"><i class="fa-solid fa-backward-fast"></i></button>
                <button id="prev-button"><i class="fa-solid fa-step-backward"></i></button>
                <button id="play-button"><i class="fa-solid fa-redo"></i></button>
                <button id="next-button"><i class="fa-solid fa-step-forward"></i></button>
                <button id="full-button"><i class="fa-solid fa-play"></i></button>
            </div>
        </div>`);const w=m?.querySelector("#test-svg"),l=document.querySelector("#slider");if(w&&l){const e=new P(w);let t=-1;e.animator.reset(),document.querySelector("#reset-button")?.addEventListener("click",()=>{t=-1,e.animator.stop(),e.animator.reset(),l.value="0"}),document.querySelector("#prev-button")?.addEventListener("click",()=>{t=h.clamp(t-1,0,e.animator.getStepCount()-1),e.animator.resetStep(t),e.update();const n=e.animator.getStepStartTime(t)/e.animator.getMasterDuration();l.value=(n*100).toString()}),document.querySelector("#next-button")?.addEventListener("click",()=>{t=h.clamp(t+1,0,e.animator.getStepCount()-1),e.animator.playStep(t);const n=e.animator.getStepStartTime(t)/e.animator.getMasterDuration();l.value=(n*100).toString()}),document.querySelector("#play-button")?.addEventListener("click",()=>{e.animator.playStep(t)}),document.querySelector("#full-button")?.addEventListener("click",()=>{l.value="0"}),l.addEventListener("input",()=>{const n=l.valueAsNumber/100*e.animator.getMasterDuration();e.animator.stop(),e.animator.setMasterElapsed(n),t=e.animator.getStepIndexFromElapsed(n),e.getSVG().update()})}
