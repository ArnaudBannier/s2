import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as C,j as d}from"./s2-playable-Bdq8E5_G.js";import{B as F,S as L}from"./base-memory-scene-Cgv4Gk36.js";import{S as b,t as M}from"./s2-code-DjLR-8B-.js";import{l as x,s as A,c as H,p as I}from"./radix-colors-dark-TbHFpvSs.js";import"./s2-lerp-anim-CJb7usyt.js";import"./s2-step-animator-B7uTbjFC.js";const w="Etat de la m√©moire : fonctions simples 1",V=`**type:int** **fn:main**(**type:void**) {
    **type:short** **var:a** = **num:1337**;
    **type:int** **var:b** = (**type:int**)**var:a** / **num:133**;
    **var:b** = **fn:func**(**var:a**, **var:b**);
    **kw:return** **num:0**;
}`,T=`**type:int** **fn:func**(**type:short** **var:a**, **type:int** **var:b**) {
    **type:int** **var:res** = **var:a** + **var:b** / **num:100**;
    **kw:for** (**type:int** **var:i** = **num:0**; **var:i** < **var:b**; **var:i**++)
        **var:res** += (**type:int**)**var:a** / **num:100**;
    **kw:return** **var:res**;
}`;class D extends F{memory;codeFunc;codeMain;constructor(e){super(e),this.codeMain=new b(this),this.codeMain.setParent(this.getSVG()),this.setDefaultCodeStyle(this.codeMain),this.codeMain.setContent(M(V)),this.codeMain.data.position.set(-6,4,this.getWorldSpace()),this.codeMain.data.anchor.set(-1,-1),this.codeFunc=new b(this),this.codeFunc.setParent(this.getSVG()),this.setDefaultCodeStyle(this.codeFunc),this.codeFunc.setContent(M(T));const i=10;this.memory=new L(this,i,{isStacked:!0,addressStart:64,addressPrefix:"@",addressRadix:10}),this.memory.setParent(this.getSVG()),this.setDefaultMemoryStyle(this.memory),this.memory.data.position.set(6,0,this.getWorldSpace()),this.update(),this.createAnimation()}createAnimation(){this.animator.makeStep();const e=d.fromHex(x[12]),i=d.fromHex(A[10]),n=d.fromHex(H[10]),h=d.fromHex(I[10]);let s=1;this.codeMain.animateSetCurrentLine(s++,this.animator);const u=this.memory.createMemoryId();u.animateSetNameAndValue("a","1337",this.animator,{valueColor:e}),this.animator.makeStep(),this.update(),this.codeMain.animateSetCurrentLine(s++,this.animator);const o=this.memory.createMemoryId();o.animateSetNameAndValue("b","10",this.animator,{valueColor:e}),this.animator.makeStep(),this.update(),this.codeMain.animateSetCurrentLine(s++,this.animator);let t=this.animator.createLabelAtCurrentTime();const g=this.codeMain.createTokenHighlight([{lineIndex:s-1,content:"func"}],n);g.animateFadeIn(this.animator,{label:t}),this.animateCallIn(this.codeMain,this.codeFunc,3),o.animateHLine(this.animator,{color:n,width:4,label:t}),this.animator.makeStep(),this.update();const l=this.memory.createMemoryId(),p=this.memory.createMemoryId();t=this.animator.createLabelAtCurrentTime(),l.animateSetName("a",this.animator,{label:t}),p.animateSetName("b",this.animator,{label:t,offset:100}),l.animateCopyValue(u,this.animator,{color:e}),p.animateCopyValue(o,this.animator,{color:e}),this.animator.makeStep(),this.update(),this.codeFunc.animateSetCurrentLine(1,this.animator);const m=this.memory.createMemoryId();m.animateSetNameAndValue("res","1337",this.animator,{valueColor:e}),this.animator.makeStep(),this.update();const S=this.memory.createMemoryId();for(let c=0;c<=10&&(this.codeFunc.animateSetCurrentLine(2,this.animator),c===0?S.animateSetNameAndValue("i","0",this.animator,{valueColor:e}):S.animateSetValue(c.toFixed(0),this.animator,{color:e}),this.animator.makeStep(),this.update(),c!==10);c++)this.codeFunc.animateSetCurrentLine(3,this.animator),m.animateSetValue((1337+(c+1)*13).toFixed(0),this.animator,{color:e}),this.animator.makeStep(),this.update();this.codeFunc.animateSetCurrentLine(4,this.animator),S.animateColor(i,this.animator);const y=this.codeMain.createTokenHighlight([{lineIndex:3,content:"b"}],h),f=this.codeFunc.createTokenHighlight([{lineIndex:4,content:"res"}],h);t=this.animator.createLabelAtCurrentTime(),y.animateFadeIn(this.animator,{label:t}),f.animateFadeIn(this.animator,{label:t}),m.animateHighlightIn(this.animator,{label:t,offset:100,color:h}),o.animateHighlightIn(this.animator,{label:t,offset:100,color:h}),this.animator.makeStep(),this.update(),o.animateCopyValue(m,this.animator,{color:e}),t=this.animator.createLabelAtCurrentTime(),y.animateFadeOut(this.animator,{label:t}),f.animateFadeOut(this.animator,{label:t}),m.animateHighlightOut(this.animator,{label:t}),o.animateHighlightOut(this.animator,{label:t}),this.animator.makeStep(),this.update(),t=this.animator.createLabelAtCurrentTime(),this.animateCallOut(this.codeFunc,{label:t}),l.animateColor(i,this.animator,{label:t}),p.animateColor(i,this.animator,{label:t}),m.animateColor(i,this.animator,{label:t}),o.animateRestoreHLine(this.animator,{label:t}),g.animateFadeOut(this.animator,{label:t}),this.animator.makeStep(),this.update(),this.codeMain.animateSetCurrentLine(s++,this.animator),this.animator.makeStep(),this.update(),this.codeMain.animateSetCurrentLine(s++,this.animator),t=this.animator.createLabelAtCurrentTime(),o.animateColor(i,this.animator,{label:t}),u.animateColor(i,this.animator,{label:t}),this.animator.makeStep(),this.update()}}const v=document.querySelector("#app");v&&(v.innerHTML=`
        <div>
            <h1>${w}</h1>
            <svg xmlns="http://www.w3.org/2000/svg" id=test-svg class="responsive-svg" preserveAspectRatio="xMidYMid meet"></svg>
            <div class="figure-nav">
                <div>Animation : <input type="range" id="slider" min="0" max="100" step="1" value="0" style="width:50%"></div>
                <button id="reset-button"><i class="fa-solid fa-backward-fast"></i></button>
                <button id="prev-button"><i class="fa-solid fa-step-backward"></i></button>
                <button id="play-button"><i class="fa-solid fa-redo"></i></button>
                <button id="next-button"><i class="fa-solid fa-step-forward"></i></button>
                <button id="full-button"><i class="fa-solid fa-play"></i></button>
            </div>
        </div>`);const k=v?.querySelector("#test-svg"),r=document.querySelector("#slider");if(k&&r){const a=new D(k);let e=-1;a.animator.reset(),document.querySelector("#reset-button")?.addEventListener("click",()=>{e=-1,a.animator.stop(),a.animator.reset(),r.value="0"}),document.querySelector("#prev-button")?.addEventListener("click",()=>{e=C.clamp(e-1,0,a.animator.getStepCount()-1),a.animator.resetStep(e),a.update();const n=a.animator.getStepStartTime(e)/a.animator.getMasterDuration();r.value=(n*100).toString()}),document.querySelector("#next-button")?.addEventListener("click",()=>{e=C.clamp(e+1,0,a.animator.getStepCount()-1),a.animator.playStep(e);const n=a.animator.getStepStartTime(e)/a.animator.getMasterDuration();r.value=(n*100).toString()}),document.querySelector("#play-button")?.addEventListener("click",()=>{a.animator.playStep(e)}),document.querySelector("#full-button")?.addEventListener("click",()=>{a.animator.playMaster(),r.value="0"}),r.addEventListener("input",()=>{const n=r.valueAsNumber/100*a.animator.getMasterDuration();a.animator.stop(),a.animator.setMasterElapsed(n),e=a.animator.getStepIndexFromElapsed(n),a.getSVG().update()})}
