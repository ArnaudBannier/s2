(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class me{elements=[0,0,0,0,0,0];constructor(t=0,e=0,s=0,i=0,r=0,o=0){this.set(t,e,s,i,r,o)}static createIdentity(){return new me(1,0,0,0,1,0)}set(t=0,e=0,s=0,i=0,r=0,o=0){return this.elements[0]=t,this.elements[2]=e,this.elements[4]=s,this.elements[1]=i,this.elements[3]=r,this.elements[5]=o,this}fromArray(t,e=0){for(let s=0;s<6;s++)this.elements[s]=t[s+e];return this}isIdentity(){const t=this.elements;return t[0]===1&&t[2]===0&&t[4]===0&&t[1]===0&&t[3]===1&&t[5]===0}identity(){return this.set(1,0,0,0,1,0)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,o=s[0],l=s[1],h=s[2],a=s[3],c=s[4],u=s[5],d=i[0],m=i[1],y=i[2],C=i[3],H=i[4],et=i[5];return r[0]=o*d+h*m,r[1]=l*d+a*m,r[2]=o*y+h*C,r[3]=l*y+a*C,r[4]=o*H+h*et+c,r[5]=l*H+a*et+u,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}copy(t){for(let e=0;e<6;e++)this.elements[e]=t.elements[e];return this}clone(){return new me().copy(this)}makeTranslation(t,e){return this.set(1,0,t,0,1,e)}makeScale(t,e){return this.set(t,0,0,0,e,0)}makeScaleFrom(t,e,s,i){return this.set(t,0,-t*s+s,0,e,-e*i+i)}makeRotationRad(t){const e=Math.sin(t),s=Math.cos(t);return this.set(s,-e,0,+e,s,0)}makeRotationDeg(t){return this.makeRotationRad(t*Math.PI/180)}makeRotationFromRad(t,e,s){const i=Math.sin(t),r=Math.cos(t);return this.set(r,-i,-e*r+s*i+e,+i,r,-s*r-e*i+s)}makeRotationFromDeg(t,e,s){return this.makeRotationFromRad(t*Math.PI/180,e,s)}}class p{x;y;constructor(t=0,e=0){this.x=t,this.y=e}static fromPolarRad(t,e=1){return new p(e*Math.cos(t),e*Math.sin(t))}static fromPolarDeg(t,e=1){return t*=Math.PI/180,new p(e*Math.cos(t),e*Math.sin(t))}static add(t,e){return new p(t.x+e.x,t.y+e.y)}static sub(t,e){return new p(t.x-e.x,t.y-e.y)}static mul(t,e){return new p(t.x*e.x,t.y*e.y)}static scale(t,e){return new p(t.x*e,t.y*e)}static lerp(t,e,s){const i=1-s;return new p(i*t.x+s*e.x,i*t.y+s*e.y)}static eq(t,e,s=1e-4){return Math.abs(t.x-e.x)<s&&Math.abs(t.y-e.y)<s}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPolarRad(t,e=1){return this.set(e*Math.cos(t),e*Math.sin(t))}setFromPolarDeg(t,e=1){return t*=Math.PI/180,this.set(e*Math.cos(t),e*Math.sin(t))}shiftX(t){return this.x+=t,this}shiftY(t){return this.y+=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new p(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return this.x+=t,this.y+=e,this}addV(t){return this.x+=t.x,this.y+=t.y,this}sub(t,e){return this.x-=t,this.y-=e,this}subV(t){return this.x-=t.x,this.y-=t.y,this}mul(t,e){return this.x*=t,this.y*=e,this}mulV(t){return this.x*=t.x,this.y*=t.y,this}scale(t){return this.x*=t,this.y*=t,this}negate(){return this.x=-this.x,this.y=-this.y,this}min(t,e){return this.x=Math.min(this.x,t),this.y=Math.min(this.y,e),this}minV(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t,e){return this.x=Math.max(this.x,t),this.y=Math.max(this.y,e),this}maxV(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}apply2x2(t){const e=t.elements,s=this.x,i=this.y;return this.x=e[0]*s+e[2]*i,this.y=e[1]*s+e[3]*i,this}apply2x3(t){const e=t.elements,s=this.x,i=this.y;return this.x=e[0]*s+e[2]*i+e[4],this.y=e[1]*s+e[3]*i+e[5],this}dot(t){return this.x*t.x+this.y*t.y}det(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}distanceSq(t){const e=t.x-this.x,s=t.y-this.y;return e*e+s*s}distance(t){return Math.sqrt(this.distanceSq(t))}normalize(){return this.scale(1/this.length())}setLength(t){return this.scale(t/this.length())}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}angle(){return Math.atan2(-this.y,this.x)}angleTo(t){const e=this.det(t),s=this.dot(t);return Math.atan2(e,s)}perp(t=!1){const e=this.x,s=t?-1:1;return this.x=-s*this.y,this.y=s*e,this}rotateRad(t){const e=Math.sin(t),s=Math.cos(t),i=this.x,r=this.y;return this.x=s*i-e*r,this.y=e*i+s*r,this}rotateDeg(t){return this.rotateRad(t*Math.PI/180)}*[Symbol.iterator](){yield this.x,yield this.y}}class ii{position;viewExtents;viewScale;viewport;constructor(t,e,s,i=1){this.position=t,this.viewExtents=e,this.viewport=s,this.viewScale=i}viewToWorldX(t){const e=t/this.viewport.x,s=2*this.viewExtents.x*this.viewScale;return this.position.x-this.viewExtents.x*this.viewScale+e*s}viewToWorldY(t){const e=1-t/this.viewport.y,s=2*this.viewExtents.y*this.viewScale;return this.position.y-this.viewExtents.y*this.viewScale+e*s}viewToWorld(t,e){return new p(this.viewToWorldX(t),this.viewToWorldY(e))}viewToWorldV(t){return this.viewToWorld(t.x,t.y)}viewToWorldLength(t){return t*this.getViewToWorldScaleX()}getWorldToViewScaleX(){return .5*this.viewport.x/(this.viewExtents.x*this.viewScale)}getWorldToViewScaleY(){return .5*this.viewport.y/(this.viewExtents.y*this.viewScale)}getViewToWorldScaleX(){return 2*(this.viewExtents.x*this.viewScale)/this.viewport.x}getViewToWorldScaleY(){return 2*(this.viewExtents.y*this.viewScale)/this.viewport.y}worldToViewX(t){const e=this.getWorldToViewScaleX();return(t-(this.position.x-this.viewExtents.x*this.viewScale))*e}worldToViewY(t){const e=this.getWorldToViewScaleY();return(this.position.y+this.viewExtents.y*this.viewScale-t)*e}worldToView(t,e){return new p(this.worldToViewX(t),this.worldToViewY(e))}worldToViewV(t){return this.worldToView(t.x,t.y)}worldToViewLength(t){return t*this.getWorldToViewScaleX()}getLower(){return p.sub(this.position,p.scale(this.viewExtents,this.viewScale))}getUpper(){return p.add(this.position,p.scale(this.viewExtents,this.viewScale))}}class j{value;space;constructor(t=0,e=0,s="world"){this.value=new p(t,e),this.space=s}clone(){return new j(this.value.x,this.value.y,this.space)}copy(t){return t?(this.value.copy(t.value),this.space=t.space):(this.value.set(0,0),this.space="world"),this}setValueFromSpace(t,e,s,i){return this.space===t?this.value.set(s,i):this.space==="world"?(this.value.x=e.viewToWorldX(s),this.value.y=e.viewToWorldY(i)):(this.value.x=e.worldToViewX(s),this.value.y=e.worldToViewY(i)),this}changeSpace(t,e){return this.space===t?this:(this.space==="world"?(this.value.x=e.worldToViewX(this.value.x),this.value.y=e.worldToViewY(this.value.y)):(this.value.x=e.viewToWorldX(this.value.x),this.value.y=e.viewToWorldY(this.value.y)),this.space=t,this)}toSpace(t,e){return j.toSpace(this.value,this.space,t,e)}static toSpace(t,e,s,i){return e===s?t.clone():e==="world"?i.worldToViewV(t):i.viewToWorldV(t)}}class O{value;space;constructor(t=0,e="world"){this.value=t,this.space=e}clone(){return new O(this.value,this.space)}copy(t){return this.value=t?.value??0,this.space=t?.space??"world",this}setValueFromSpace(t,e,s){return this.space===t?this.value=s:this.space==="world"?this.value=e.viewToWorldLength(s):this.value=e.worldToViewLength(s),this}changeSpace(t,e){return this.space===t?this:(this.space==="world"?this.value=e.worldToViewLength(this.value):this.value=e.viewToWorldLength(this.value),this.space=t,this)}toSpace(t,e){return O.toSpace(this.value,this.space,t,e)}static toSpace(t,e,s,i){return e===s?t:e==="world"?i.worldToViewLength(t):i.viewToWorldLength(t)}}class mt{value;space;constructor(t,e,s="world"){this.value=new p(t,e),this.space=s}clone(){return new mt(this.value.x,this.value.y,this.space)}copy(t){return t?(this.value.copy(t.value),this.space=t.space):(this.value.set(0,0),this.space="world"),this}setValueFromSpace(t,e,s,i){return this.space===t?this.value.set(s,i):this.space==="world"?(this.value.x=e.viewToWorldLength(s),this.value.y=e.viewToWorldLength(i)):(this.value.x=e.worldToViewLength(s),this.value.y=e.worldToViewLength(i)),this}changeSpace(t,e){return this.space===t?this:(this.space==="world"?(this.value.x=e.worldToViewLength(this.value.x),this.value.y=e.worldToViewLength(this.value.y)):(this.value.x=e.viewToWorldLength(this.value.x),this.value.y=e.viewToWorldLength(this.value.y)),this.space=t,this)}toSpace(t,e){return mt.toSpace(this.value,this.space,t,e)}static toSpace(t,e,s,i){return e===s?t.clone():e==="world"?new p(i.worldToViewLength(t.x),i.worldToViewLength(t.y)):new p(i.viewToWorldLength(t.x),i.viewToWorldLength(t.y))}}function He(n,t,e){return Math.max(t,Math.min(e,n))}function ht(n,t,e){return(1-e)*n+e*t}function bs(n,t,e){return n!==t?(e-n)/(t-n):0}function ni(n,t,e,s,i){return ht(e,s,bs(n,t,i))}const Rt="http://www.w3.org/2000/svg";class B{r;g;b;static fromHex(t){const e=new B,s=parseInt(t.substring(1),16);return e.r=s>>16&255,e.g=s>>8&255,e.b=s&255,e}constructor(t=0,e=0,s=0){this.r=t,this.g=e,this.b=s}clone(){return new B(this.r,this.g,this.b)}copy(t){return t?(this.r=t.r,this.g=t.g,this.b=t.b,this):this}toHex(){return"#"+[this.r,this.g,this.b].map(t=>t.toString(16).padStart(2,"0")).join("")}toRgb(){return`rgb(${Math.floor(this.r)}, ${Math.floor(this.g)}, ${Math.floor(this.b)})`}static lerp(t,e,s){const i=ht(t.r,e.r,s),r=ht(t.g,e.g,s),o=ht(t.b,e.b,s);return new B(i,r,o)}}class Ze{static getCenter(t,e,s,i,r){const o=e==="world"?1:-1,l=i.toSpace(e,s),h=r.toSpace(e,s);switch(t){case"north west":l.shiftY(-o*h.y).shiftX(+h.x);break;case"north":l.shiftY(-o*h.y);break;case"north east":l.shiftY(-o*h.y).shiftX(-h.x);break;case"west":l.shiftX(+h.x);break;case"center":break;case"east":l.shiftX(-h.x);break;case"south west":l.shiftY(+o*h.y).shiftX(+h.x);break;case"south":l.shiftY(+o*h.y);break;case"south east":l.shiftY(+o*h.y).shiftX(-h.x);break}return l}static getNorthWest(t,e,s,i){const r=e==="world"?1:-1,o=s.clone();switch(t){case"north west":break;case"north":o.shiftX(-i.x);break;case"north east":o.shiftX(-2*i.x);break;case"west":o.shiftY(r*i.y);break;case"center":o.shiftY(r*i.y).shiftX(-i.x);break;case"east":o.shiftY(r*i.y).shiftX(-2*i.x);break;case"south west":o.shiftY(2*r*i.y);break;case"south":o.shiftY(2*r*i.y).shiftX(-i.x);break;case"south east":o.shiftY(2*r*i.y).shiftX(-2*i.x);break}return o}}class ri{static computeSizes(t,e,s,i,r){const o=e.reduce((a,c)=>a+c,0),l=2*i+r*Math.max(t.length-1,0),h=Math.max((s-l)/o,t.map((a,c)=>a/e[c]).reduce((a,c)=>Math.max(a,c),0));for(let a=0;a<t.length;a++)t[a]=e[a]*h;return h*o+l}}const Q={WHITE:new B(255,255,255),LIGHT_BLUE_3:new B(79,195,247),LIGHT_BLUE_6:new B(3,155,229),LIGHT_BLUE_7:new B(2,136,209),GREY_4:new B(189,189,189),GREY_6:new B(117,117,117),GREY_7:new B(97,97,97),GREY_8:new B(66,66,66)},oi={WHITE:"#FFFFFF"};class Le{position;pathFrom;pathTo;fillColor;fillOpacity;opacity;strokeColor;strokeWidth;clone(){const t=new Le;return Object.assign(t,this),this.position&&(t.position=this.position.clone()),this.fillColor&&(t.fillColor=this.fillColor.clone()),this.strokeColor&&(t.strokeColor=this.strokeColor.clone()),this.strokeWidth&&(t.strokeWidth=this.strokeWidth.clone()),t}}class Pt{fillColor;fillOpacity;opacity;position;pathFrom;pathTo;strokeColor;strokeWidth;textFillColor;textFillOpacity;textOpacity;textStrokeColor;textStrokeWidth;minExtents;padding;partSep;lineCap;lineJoin;anchor;textAlign;verticalAlign;constructor(t){Object.assign(this,t)}}class wt{scene;parent=null;styleDecl={};id;layer=0;isActive=!0;constructor(t){this.scene=t,this.id=t.nextId++}static compareLayers(t,e){return t.layer!==e.layer?t.layer-e.layer:t.id-e.id}static updateSVGChildren(t,e){e.sort(wt.compareLayers);const s=[];for(const i of e)i.getIsActive()&&s.push(i.getSVGElement());t.replaceChildren(...s)}setLayer(t=0){return this.layer=t,this}getLayer(){return this.layer}setIsActive(t){return this.isActive=t,this}getIsActive(){return this.isActive}setAnimatableAttributes(t){return this}getAnimatableAttributes(){return new Le}setAttributes(t){return this}getAttributes(){return new Pt}setSVGAttribute(t,e){return this.getSVGElement().setAttribute(t,e),this}setId(t){const e=this.getSVGElement();return e.id=t,this}addClass(t){return this.getSVGElement().classList.add(t),this}setSVGAttributes(t){this.styleDecl={...this.styleDecl,...t};const e=this.getSVGElement();for(const[s,i]of Object.entries(t))e.setAttribute(s,i);return this}getSVGAttributes(){return{...this.styleDecl}}setParent(t){return this.parent=t,this}getParent(){return this.parent}getActiveCamera(){return this.scene.activeCamera}}class ai{matrix;tmp;constructor(){this.tmp=new me,this.matrix=this.tmp}setTarget(t,e=!0){return this.matrix=t,e&&this.matrix.identity(),this}identity(){return this.matrix.identity(),this}rotateRad(t){return this.tmp.makeRotationRad(t),this.matrix.premultiply(this.tmp),this}rotateDeg(t){return this.tmp.makeRotationDeg(t),this.matrix.premultiply(this.tmp),this}translate(t,e){return this.tmp.makeTranslation(t,e),this.matrix.premultiply(this.tmp),this}translateV(t){return this.tmp.makeTranslation(t.x,t.y),this.matrix.premultiply(this.tmp),this}scale(t,e){return this.tmp.makeScale(t,e),this.matrix.premultiply(this.tmp),this}scaleFrom(t,e,s,i){return this.tmp.makeScaleFrom(t,e,s,i),this.matrix.premultiply(this.tmp),this}scaleFromV(t,e,s){return this.scaleFrom(t,e,s.x,s.y)}scaleUniform(t){return this.tmp.makeScale(t,t),this.matrix.premultiply(this.tmp),this}scaleUniformFrom(t,e,s){return this.scaleFrom(t,t,e,s)}scaleUniformFromV(t,e){return this.scaleFrom(t,t,e.x,e.y)}rotateFromRad(t,e,s){return this.tmp.makeRotationFromRad(t,e,s),this.matrix.premultiply(this.tmp),this}rotateFromRadV(t,e){return this.rotateFromRad(t,e.x,e.y)}rotateFromDeg(t,e,s){return this.tmp.makeRotationFromDeg(t,e,s),this.matrix.premultiply(this.tmp),this}rotateFromDegV(t,e){return this.rotateFromDeg(t,e.x,e.y)}}class As extends wt{transform;strokeWidth;fillColor;fillOpacity;opacity;strokeColor;lineCap;lineJoin;constructor(t){super(t),this.transform=me.createIdentity(),this.strokeWidth=new O(0,"view")}setAnimatableAttributes(t){return super.setAnimatableAttributes(t),this.setFillColor(t.fillColor).setFillOpacity(t.fillOpacity).setOpacity(t.opacity).setStrokeColor(t.strokeColor).setStrokeWidthL(t.strokeWidth),this}getAnimatableAttributes(){const t=super.getAnimatableAttributes();return this.strokeColor!==void 0&&(t.strokeColor=this.strokeColor),this.strokeWidth.value>0&&(t.strokeWidth=this.strokeWidth),this.fillColor!==void 0&&(t.fillColor=this.fillColor),this.fillOpacity!==void 0&&(t.fillOpacity=this.fillOpacity),this.opacity!==void 0&&(t.opacity=this.opacity),t}setAttributes(t){return super.setAttributes(t),this.setFillColor(t.fillColor).setFillOpacity(t.fillOpacity).setOpacity(t.opacity).setLineCap(t.lineCap).setLineJoin(t.lineJoin).setStrokeColor(t.strokeColor).setStrokeWidthL(t.strokeWidth),this}getAttributes(){const t=super.getAttributes();return this.strokeColor!==void 0&&(t.strokeColor=this.strokeColor),this.strokeWidth.value>0&&(t.strokeWidth=this.strokeWidth),this.fillColor!==void 0&&(t.fillColor=this.fillColor),this.fillOpacity!==void 0&&(t.fillOpacity=this.fillOpacity),this.opacity!==void 0&&(t.opacity=this.opacity),this.lineCap!==void 0&&(t.lineCap=this.lineCap),this.lineJoin!==void 0&&(t.lineJoin=this.lineJoin),t}setFillOpacity(t){return this.fillOpacity=t,this}setLineCap(t){return this.lineCap=t,this}setLineJoin(t){return this.lineJoin=t,this}setFillColor(t){return this.fillColor=t?t.clone():void 0,this}setStrokeColor(t){return this.strokeColor=t?t.clone():void 0,this}setOpacity(t){return this.opacity=t,this}setStrokeWidth(t,e){return e&&(this.strokeWidth.space=e),this.strokeWidth.value=t??0,this}setStrokeWidthL(t){return this.strokeWidth.copy(t),this}getStrokeWidth(t=this.strokeWidth.space){return this.strokeWidth.toSpace(t,this.getActiveCamera())}changeStrokeWidthSpace(t){return this.strokeWidth.changeSpace(t,this.getActiveCamera()),this}buildTransform(t,e=!0){return t=t??new ai,t.setTarget(this.transform,e)}setTranslation(t,e){return this.transform.makeTranslation(t,e),this}setTranslationV(t){return this.transform.makeTranslation(t.x,t.y),this}setScale(t,e){return this.transform.makeScale(t,e),this}setScaleFrom(t,e,s,i){return this.transform.makeScaleFrom(t,e,s,i),this}setScaleFromV(t,e,s){return this.transform.makeScaleFrom(t,e,s.x,s.y),this}setRotationRad(t){return this.transform.makeRotationRad(t),this}setRotationDeg(t){return this.transform.makeRotationDeg(t),this}setRotationFromRad(t,e,s){return this.transform.makeRotationFromRad(t,e,s),this}setRotationFromRadV(t,e){return this.transform.makeRotationFromRad(t,e.x,e.y),this}setRotationFromDeg(t,e,s){return this.transform.makeRotationFromDeg(t,e,s),this}setRotationFromDegV(t,e){return this.transform.makeRotationFromDeg(t,e.x,e.y),this}updateSVGStyle(t){if(this.fillColor!==void 0&&t.setAttribute("fill",this.fillColor.toRgb()),this.fillOpacity!==void 0&&t.setAttribute("fill-opacity",this.fillOpacity.toString()),this.opacity!==void 0&&t.setAttribute("opacity",this.opacity.toString()),this.strokeColor!==void 0&&t.setAttribute("stroke",this.strokeColor.toRgb()),this.lineCap!==void 0&&t.setAttribute("stroke-linecap",this.lineCap),this.lineJoin!==void 0&&t.setAttribute("stroke-linejoin",this.lineJoin),this.strokeWidth.value>0){const e=this.getStrokeWidth("view");t.setAttribute("stroke-width",e.toString())}}updateSVGTransform(t){if(this.transform.isIdentity())return;const e=this.transform.elements;t.setAttribute("transform",`matrix(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]}, ${e[4]}, ${e[5]})`)}}class Ve extends As{element;children;constructor(t,e){super(t),this.element=e,this.children=[]}appendChild(t){const e=t.getParent();return e===this?this:(e&&e instanceof Ve&&e.removeChild(t),this.children.push(t),t.setParent(this),wt.updateSVGChildren(this.element,this.children),this)}removeChildren(){for(const t of this.children)t.setParent(null);return this.children.length=0,wt.updateSVGChildren(this.element,this.children),this}removeChild(t){const e=this.children.indexOf(t);return e!==-1&&(this.children.splice(e,1),t.setParent(null)),wt.updateSVGChildren(this.element,this.children),this}removeLastChild(){const t=this.children.pop();return t&&t.setParent(null),wt.updateSVGChildren(this.element,this.children),this}getChildCount(){return this.children.length}getChild(t){return this.children[t]}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element),wt.updateSVGChildren(this.element,this.children);for(const t of this.children)t.update();return this}}class hi extends Ve{element;constructor(t,e){super(t,e),this.element=e,this.update()}getSVGElement(){return this.element}update(){super.update();const t=this.getActiveCamera();return this.element.setAttribute("viewBox",`0 0 ${t.viewport.width} ${t.viewport.height}`),this}}class _t extends As{position;constructor(t){super(t),this.position=new j(0,0,"world")}setAnimatableAttributes(t){return super.setAnimatableAttributes(t),t.position&&this.position.copy(t.position),this}getAnimatableAttributes(){const t=super.getAnimatableAttributes();return t.position=this.position.clone(),t}setAttributes(t){return super.setAttributes(t),t.position&&this.position.copy(t.position),this}getAttributes(){const t=super.getAttributes();return t.position=this.position.clone(),t}setPosition(t,e,s){return s&&(this.position.space=s),this.position.value.set(t,e),this}setPositionV(t,e){return e&&(this.position.space=e),this.position.value.copy(t),this}getPosition(t=this.position.space){return this.position.toSpace(t,this.getActiveCamera())}getS2Position(){return this.position.clone()}changePositionSpace(t){return this.position.changeSpace(t,this.getActiveCamera()),this}}class Es extends _t{element;radius;constructor(t){super(t),this.element=document.createElementNS(Rt,"circle"),this.radius=new O(1,"world")}getSVGElement(){return this.element}setRadius(t,e){return e&&(this.radius.space=e),this.radius.value=t??0,this}setRadiusL(t){return this.radius.copy(t),this}getRadius(t=this.radius.space){return this.radius.toSpace(t,this.getActiveCamera())}getPointInDirection(t,e=this.position.space,s){const i=s.toSpace(e,this.getActiveCamera()),r=Math.max(this.getRadius(e)+i,0);return t.clone().normalize().scale(r).addV(this.getPosition(e))}changeRadiusSpace(t){return this.radius.changeSpace(t,this.getActiveCamera()),this}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element);const t=this.getPosition("view"),e=this.getRadius("view");return this.element.setAttribute("cx",t.x.toString()),this.element.setAttribute("cy",t.y.toString()),this.element.setAttribute("r",e.toString()),this}}class li{intersectRayCircle(t,e,s,i){const r=t.clone().subV(s),o=e.dot(e),l=2*e.dot(r),h=r.dot(r)-i*i,a=l*l-4*o*h;if(a<0)return[];const c=Math.sqrt(a),u=(-l-c)/(2*o),d=(-l+c)/(2*o),m=[];return u>=0&&m.push(e.clone().scale(u).addV(t)),d>=0&&d!==u&&m.push(e.clone().scale(d).addV(t)),m}static intersectDirectionCircle(t,e,s){const i=t.dot(t),r=-2*t.dot(e),o=e.dot(e)-s*s,l=r*r-4*i*o;if(l<0)return-1;const h=Math.sqrt(l),a=(-r-h)/(2*i),c=(-r+h)/(2*i);return Math.max(a,c)}static intersectDirectionRoundedRectangle(t,e,s){const i=e.x-s+1e-5,r=e.y-s+1e-5;if(t.x>0){const a=t.clone().scale(+e.x/t.x);if(Math.abs(a.y)<=r)return a}if(t.x<0){const a=t.clone().scale(-e.x/t.x);if(Math.abs(a.y)<=r)return a}if(t.y>0){const a=t.clone().scale(+e.y/t.y);if(Math.abs(a.x)<=i)return a}if(t.y<0){const a=t.clone().scale(-e.y/t.y);if(Math.abs(a.x)<=i)return a}const o=e.x-s,l=e.y-s,h=new p;if(t.x>0&&t.y>0){h.set(+o,+l);const a=this.intersectDirectionCircle(t,h,s);if(a>=0)return t.clone().scale(a)}if(t.x<0&&t.y>0){h.set(-o,+l);const a=this.intersectDirectionCircle(t,h,s);if(a>=0)return t.clone().scale(a)}if(t.x>0&&t.y<0){h.set(+o,-l);const a=this.intersectDirectionCircle(t,h,s);if(a>=0)return t.clone().scale(a)}if(t.x<0&&t.y<0){h.set(-o,-l);const a=this.intersectDirectionCircle(t,h,s);if(a>=0)return t.clone().scale(a)}return new p(0,0)}static circleVsCircle(t,e,s,i,r,o){const l=i-t,h=r-e,a=Math.hypot(l,h);if(a>s+o||a<Math.abs(s-o)||a===0)return[];const c=(s*s-o*o+a*a)/(2*a),u=Math.sqrt(s*s-c*c),d=t+c*l/a,m=e+c*h/a,y=-h*(u/a),C=+l*(u/a);return[new p(d+y,m+C),new p(d-y,m-C)]}static getArcCenter(t,e,s,i=!1){const r=e.clone().subV(t),o=r.lengthSq(),l=Math.sqrt(s*s-o/4),h=r.clone().perp(i).scale(l/Math.sqrt(o));return t.clone().addV(r.scale(.5)).addV(h)}static getClosestPoint(t,e){if(e.length<=0)return new p(0,0);let s=0,i=t.distanceSq(e[0]);for(let r=1;r<e.length;r++){const o=t.distanceSq(e[r]);o<i&&(i=o,s=r)}return e[s].clone()}}class ks extends _t{element;radius;extents;anchor="north";constructor(t){super(t),this.element=document.createElementNS(Rt,"rect"),this.extents=new mt(1,1,"world"),this.radius=new O(0,"view")}getSVGElement(){return this.element}setAnchor(t){return this.anchor=t,this}setExtents(t,e,s){return s&&(this.extents.space=s),this.extents.value.set(t,e),this}setExtentsV(t,e){return e&&(this.extents.space=e),this.extents.value.copy(t),this}setRadius(t,e){return e&&(this.radius.space=e),this.radius.value=t??0,this}setRadiusL(t){return this.radius.copy(t),this}getExtents(t=this.extents.space){return this.extents.toSpace(t,this.getActiveCamera())}getRadius(t=this.radius.space){return this.radius.toSpace(t,this.getActiveCamera())}getCenter(t=this.position.space){return Ze.getCenter(this.anchor,t,this.getActiveCamera(),this.position,this.extents)}getPointInDirection(t,e=this.position.space,s){const i=s.toSpace(e,this.getActiveCamera()),r=this.getExtents(e).add(i,i).max(0,0),o=Math.min(Math.max(this.getRadius(e)+i,0),r.x,r.y);return li.intersectDirectionRoundedRectangle(t,r,o).addV(this.getCenter(e))}changeExtentsSpace(t){return this.extents.changeSpace(t,this.getActiveCamera()),this}changeRadiusSpace(t){return this.radius.changeSpace(t,this.getActiveCamera()),this}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element);const t=this.getExtents("view"),e=this.getCenter("view").subV(t);if(this.element.setAttribute("x",e.x.toString()),this.element.setAttribute("y",e.y.toString()),this.element.setAttribute("width",(2*t.x).toString()),this.element.setAttribute("height",(2*t.y).toString()),this.radius.value>0){const s=Math.min(this.getRadius("view"),t.x,t.y);this.element.setAttribute("rx",s.toString()),this.element.setAttribute("ry",s.toString())}return this}}class ee{curves=[];length=0;cumulativeLengths=[];constructor(){}clone(){const t=new ee;for(const e of this.curves)t.curves.push(e.clone());return t.length=this.length,t.cumulativeLengths=this.cumulativeLengths.slice(),t}clear(){return this.curves.length=0,this.length=0,this.cumulativeLengths.length=0,this}getCurve(t){return this.curves[t]}getCurveCount(){return this.curves.length}getLastCurve(){return this.curves[this.curves.length-1]}getCurveParam(t){const e=t*this.length;for(let s=0;s<this.cumulativeLengths.length;s++){const i=this.cumulativeLengths[s];if(e<i)return{index:s,t:bs(i-this.curves[s].getLength(),i,e)}}return{index:this.curves.length-1,t:1}}getStart(){return this.curves[0].getStart()}getEnd(){return this.curves[this.curves.length].getEnd()}getStartTangent(){return this.curves[0].getStartTangent()}getEndTangent(){return this.curves[this.curves.length-1].getEndTangent()}updateLength(){this.cumulativeLengths.length=0,this.length=0;for(let t=0;t<this.curves.length;t++)this.length+=this.curves[t].getLength(),this.cumulativeLengths.push(this.length);return this}addLine(t,e){const s=new qt(t,e);return this.length+=s.getLength(),this.curves.push(s),s}addQuadratic(t,e,s,i=0){const r=new pe(t,e,s).computeLinearLUT(i);return i>0&&r.computeLinearLUT(i),this.length+=r.getLength(),this.curves.push(r),r}addCubic(t,e,s,i,r=0){const o=new Yt(t,e,s,i);return r>0&&o.computeLinearLUT(r),this.length+=o.getLength(),this.curves.push(o),o}getPointAt(t){if(this.curves.length===0)return new p(0,0);const e=this.getCurveParam(t);return this.curves[e.index].getPointAt(e.t)}getTangentAt(t){if(this.curves.length===0)return new p(0,0);const e=this.getCurveParam(t);return this.curves[e.index].getTangentAt(e.t)}createPartialCurveTo(t){const e=new ee;if(this.curves.length===0)return e;const s=this.getCurveParam(t);for(let i=0;i<s.index;i++)e.curves.push(this.curves[i].clone());return e.curves.push(this.curves[s.index].createPartialCurveTo(s.t)),e.updateLength(),e}createPartialCurveFrom(t){const e=new ee;if(this.curves.length===0)return e;const s=this.getCurveParam(t);e.curves.push(this.curves[s.index].createPartialCurveFrom(s.t));for(let i=s.index+1;i<this.curves.length;i++)e.curves.push(this.curves[i].clone());return e.updateLength(),e}createPartialCurveRange(t,e){const s=new ee;if(this.curves.length===0||t>=e)return s;const i=this.getCurveParam(t),r=this.getCurveParam(e);if(i.index==r.index)s.curves.push(this.curves[i.index].createPartialCurveRange(i.t,r.t));else{s.curves.push(this.curves[i.index].createPartialCurveFrom(i.t));for(let o=i.index+1;o<r.index;o++)s.curves.push(this.curves[o].clone());s.curves.push(this.curves[r.index].createPartialCurveTo(r.t))}return s.updateLength(),s}getLength(){return this.length}}class qt{p0;p1;length;constructor(t,e){this.p0=t.clone(),this.p1=e.clone(),this.length=this.p0.distance(this.p1)}getTangentAt(t){return p.sub(this.p1,this.p0)}getStartTangent(){return p.sub(this.p1,this.p0)}getEndTangent(){return p.sub(this.p1,this.p0)}clone(){return new qt(this.p0,this.p1)}getLength(){return this.length}getStart(){return this.p0.clone()}getEnd(){return this.p1.clone()}getPointAt(t){return p.lerp(this.p0,this.p1,t)}createPartialCurveTo(t){return new qt(this.p0,this.getPointAt(t))}createPartialCurveFrom(t){return new qt(this.getPointAt(t),this.p1)}createPartialCurveRange(t,e){return new qt(this.getPointAt(t),this.getPointAt(e))}}class Ps{points=[];linearLUT=null;sampleCount=0;length=0;getLength(){return this.length}linearize(t){if(this.linearLUT===null)return t;const e=t*(this.sampleCount+0),s=Math.floor(e);return s<0?0:s>=this.linearLUT.length-1?1:ht(this.linearLUT[s],this.linearLUT[s+1],e-s)}computeLinearLUT(t=8){const e=[0];let s=this.getPointAtCasteljau(0),i=0;for(let o=1;o<=t;o++){const l=this.getPointAtCasteljau(o/t);i+=s.distance(l),e.push(i),s=l}this.length=i,this.sampleCount=t,e.forEach((o,l,h)=>{h[l]=o/i}),this.linearLUT=[0];let r=1;for(let o=1;o<=t;o++){const l=o/t;for(;e[r]<l&&r<e.length-1;)r++;this.linearLUT.push(ni(e[r-1],e[r],(r-1)/t,r/t,l))}return this}getPointAt(t){return this.getPointAtCasteljau(this.linearize(t))}getBezierPoint(t){return this.points[t]}getBezierPoints(){return this.points.map(t=>t.clone())}}class pe extends Ps{constructor(t,e,s){super(),this.points.push(t.clone()),this.points.push(e.clone()),this.points.push(s.clone()),this.length=t.distance(s)}clone(){const t=this.points,e=new pe(t[0],t[1],t[2]);return this.linearLUT&&(e.linearLUT=this.linearLUT.slice(),e.length=this.length,e.sampleCount=this.sampleCount),e}getStart(){return this.points[0].clone()}getEnd(){return this.points[2].clone()}getPointAtCasteljau(t){const e=this.points,s=1-t,i=s*s,r=s*t*2,o=t*t;return new p(i*e[0].x+r*e[1].x+o*e[2].x,i*e[0].y+r*e[1].y+o*e[2].y)}getTangentAtCasteljau(t){const e=this.points;return new p((1-t)*(e[1].x-e[0].x)+t*(e[2].x-e[1].x),(1-t)*(e[1].y-e[0].y)+t*(e[2].y-e[1].y))}getTangentAt(t){return this.getTangentAtCasteljau(this.linearize(t))}getStartTangent(){return p.sub(this.points[1],this.points[0])}getEndTangent(){return p.sub(this.points[2],this.points[1])}reduceToCasteljau(t){const e=p.lerp(this.points[0],this.points[1],t),s=p.lerp(this.points[1],this.points[2],t),i=p.lerp(e,s,t);return new pe(this.points[0],e,i)}createPartialCurveTo(t){return this.reduceToCasteljau(this.linearize(t))}reduceFromCasteljau(t){const e=p.lerp(this.points[0],this.points[1],t),s=p.lerp(this.points[1],this.points[2],t),i=p.lerp(e,s,t);return new pe(i,s,this.points[2])}createPartialCurveFrom(t){return this.reduceFromCasteljau(this.linearize(t))}makePartialCasteljau(t,e){return this.reduceToCasteljau(e).reduceFromCasteljau(t/e)}createPartialCurveRange(t,e){return e=this.linearize(e),t=this.linearize(t),this.reduceToCasteljau(e).reduceFromCasteljau(t/e)}}class Yt extends Ps{constructor(t,e,s,i){super(),this.points.push(t.clone()),this.points.push(e.clone()),this.points.push(s.clone()),this.points.push(i.clone()),this.length=t.distance(i)}clone(){const t=this.points,e=new Yt(t[0],t[1],t[2],t[3]);return this.linearLUT&&(e.linearLUT=this.linearLUT.slice(),e.length=this.length,e.sampleCount=this.sampleCount),e}getStart(){return this.points[0].clone()}getEnd(){return this.points[3].clone()}getPointAtCasteljau(t){const e=this.points,s=1-t,i=s*s*s,r=s*s*t*3,o=s*t*t*3,l=t*t*t;return new p(i*e[0].x+r*e[1].x+o*e[2].x+l*e[3].x,i*e[0].y+r*e[1].y+o*e[2].y+l*e[3].y)}getTangentAtCasteljau(t){const e=this.points,s=1-t,i=s*s,r=s*t*2,o=t*t;return new p(i*(e[1].x-e[0].x)+r*(e[2].x-e[1].x)+o*(e[3].x-e[2].x),i*(e[1].y-e[0].y)+r*(e[2].y-e[1].y)+o*(e[3].y-e[2].y))}getTangentAt(t){return this.getTangentAtCasteljau(this.linearize(t))}getStartTangent(){return p.sub(this.points[1],this.points[0])}getEndTangent(){return p.sub(this.points[3],this.points[2])}reduceToCasteljau(t){const e=p.lerp(this.points[0],this.points[1],t),s=p.lerp(this.points[1],this.points[2],t),i=p.lerp(this.points[2],this.points[3],t),r=p.lerp(e,s,t),o=p.lerp(s,i,t),l=p.lerp(r,o,t);return new Yt(this.points[0],e,r,l)}createPartialCurveTo(t){return this.reduceToCasteljau(this.linearize(t))}reduceFromCasteljau(t){const e=p.lerp(this.points[0],this.points[1],t),s=p.lerp(this.points[1],this.points[2],t),i=p.lerp(this.points[2],this.points[3],t),r=p.lerp(e,s,t),o=p.lerp(s,i,t),l=p.lerp(r,o,t);return new Yt(l,o,i,this.points[3])}createPartialCurveFrom(t){return this.reduceFromCasteljau(this.linearize(t))}makePartialCasteljau(t,e){return this.reduceToCasteljau(e).reduceFromCasteljau(t/e)}createPartialCurveRange(t,e){return e=this.linearize(e),t=this.linearize(t),this.reduceToCasteljau(e).reduceFromCasteljau(t/e)}}class Qe extends _t{element;space="world";sampleCount=0;polyCurve;endPosition;shouldClose=[];pathFrom=-1;pathTo=2;constructor(t){super(t),this.element=document.createElementNS(Rt,"path"),this.polyCurve=new ee,this.endPosition=new p(0,0),this.fillOpacity=0}getSVGElement(){return this.element}setAnimatableAttributes(t){return super.setAnimatableAttributes(t),t.pathFrom!==void 0&&(this.pathFrom=t.pathFrom),t.pathTo!==void 0&&(this.pathTo=t.pathTo),this}getAnimatableAttributes(){const t=super.getAnimatableAttributes();return t.pathFrom=this.pathFrom,t.pathTo=this.pathTo,t}setAttributes(t){return super.setAttributes(t),t.pathFrom!==void 0&&(this.pathFrom=t.pathFrom),t.pathTo!==void 0&&(this.pathTo=t.pathTo),this}getAttributes(){const t=super.getAttributes();return t.pathFrom=this.pathFrom,t.pathTo=this.pathTo,t}setSampleCount(t){return this.sampleCount=t,this}setSpace(t){return this.space=t,this}setStart(t,e){return this.setStartV(new p(t,e))}setStartV(t){return this.position.space=this.space,this.position.value.copy(t),this.moveToV(t),this}getSampleCount(){return this.sampleCount}getStart(t=this.space){return this.position.toSpace(t,this.getActiveCamera())}getEnd(t=this.space){return j.toSpace(this.endPosition,this.space,t,this.getActiveCamera())}getPointAt(t,e=this.space){return j.toSpace(this.polyCurve.getPointAt(t),this.space,e,this.getActiveCamera())}getTangentAt(t,e=this.space){return j.toSpace(this.polyCurve.getTangentAt(t),this.space,e,this.getActiveCamera())}getStartTangent(t=this.space){return j.toSpace(this.polyCurve.getStartTangent(),this.space,t,this.getActiveCamera())}getEndTangent(t=this.space){return j.toSpace(this.polyCurve.getEndTangent(),this.space,t,this.getActiveCamera())}getLength(t=this.space){return O.toSpace(this.polyCurve.getLength(),this.space,t,this.getActiveCamera())}clear(){return this.polyCurve.clear(),this.shouldClose.length=0,this.endPosition.set(0,0),this}moveTo(t,e){return this.moveToV(new p(t,e))}moveToV(t){return this.endPosition.copy(t),this}lineTo(t,e){return this.lineToV(new p(t,e))}lineToV(t){return this.polyCurve.addLine(this.endPosition,t),this.endPosition.copy(t),this.shouldClose.push(!1),this}cubicTo(t,e,s,i,r,o,l=this.sampleCount){return this.cubicToV(new p(t,e),new p(s,i),new p(r,o),l)}cubicToV(t,e,s,i=this.sampleCount){return this.polyCurve.addCubic(this.endPosition,p.add(this.endPosition,t),p.add(s,e),s,i),this.endPosition.copy(s),this.shouldClose.push(!1),this}smoothCubicTo(t,e,s,i,r=this.sampleCount){return this.smoothCubicToV(new p(t,e),new p(s,i),r)}smoothCubicToV(t,e,s=this.sampleCount){if(this.polyCurve.getCurveCount()<=0)return this;const i=this.polyCurve.getLastCurve();return i instanceof Yt?(this.polyCurve.addCubic(this.endPosition,p.sub(p.scale(this.endPosition,2),i.getBezierPoint(2)),p.add(e,t),e,s),this.endPosition.copy(e),this.shouldClose.push(!1),this):this}close(){return this.shouldClose[this.shouldClose.length-1]=!0,this}setPathTo(t){return this.pathTo=t,this}setPathFrom(t){return this.pathFrom=t,this}setPathRange(t,e){return this.pathFrom=t,this.pathTo=e,this}getPathFrom(){return this.pathFrom}getPathTo(){return this.pathTo}getPathRange(){return[this.pathFrom,this.pathTo]}polyCurveToPath(t){const e=t.getCurveCount();if(e===0||this.pathFrom>=this.pathTo)return"";const s=this.getActiveCamera();let i=null,r="";for(let o=0;o<e;o++){const l=t.getCurve(o),h=l.getStart();if(i===null||!p.eq(h,i)){const a=j.toSpace(h,this.space,"view",s);r+=` M ${a.x} ${a.y}`}if(l instanceof qt){const a=j.toSpace(l.getEnd(),this.space,"view",s);r+=` L ${a.x} ${a.y}`}else if(l instanceof Yt){const a=l.getBezierPoints();r+=" C";for(let c=1;c<a.length;c++){const u=j.toSpace(a[c],this.space,"view",s);r+=` ${u.x} ${u.y}`}}this.shouldClose[o]&&(r+=" Z"),i=l.getEnd()}return r}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element),this.polyCurve.updateLength();let t=this.polyCurve;this.pathFrom>0&&this.pathTo<1?t=this.polyCurve.createPartialCurveRange(this.pathFrom,this.pathTo):this.pathFrom>0?t=this.polyCurve.createPartialCurveFrom(this.pathFrom):this.pathTo<1&&(t=this.polyCurve.createPartialCurveTo(this.pathTo));const e=this.polyCurveToPath(t);return this.element.setAttribute("d",e),this}}class ci extends _t{extents;steps;epsilon=1e-5;path;constructor(t){super(t),this.extents=new mt(0,0,"world"),this.steps=new mt(1,1,"world"),this.path=new Qe(t)}getSVGElement(){return this.path.getSVGElement()}setExtents(t,e,s){return s&&(this.extents.space=s),this.extents.value.set(t,e),this}setExtentsV(t,e){return e&&(this.extents.space=e),this.extents.value.copy(t),this}setSteps(t,e,s){return s&&(this.steps.space=s),this.steps.value.set(t,e),this}setStepsV(t,e){return e&&(this.steps.space=e),this.steps.value.copy(t),this}getExtents(t=this.extents.space){return this.extents.toSpace(t,this.getActiveCamera())}getSteps(t=this.steps.space){return this.steps.toSpace(t,this.getActiveCamera())}update(){this.path.clear(),this.path.setSpace("world"),this.path.setAttributes(new Pt({strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillOpacity:0}));const t=this.getPosition("world"),e=this.getExtents("world"),s=this.getSteps("world"),i=t.x-e.x,r=t.x+e.x,o=t.y-e.y,l=t.y+e.y;for(let h=i;h<r+this.epsilon;h+=s.x)this.path.moveTo(h,o).lineTo(h,l);for(let h=o;h<l+this.epsilon;h+=s.y)this.path.moveTo(i,h).lineTo(r,h);return this.path.update(),this}}class Rs extends _t{element;viewExtents;tspans;constructor(t){const e=document.createElementNS(Rt,"text");super(t),this.element=e,this.tspans=[],this.viewExtents=new p(0,0)}getSVGElement(){return this.element}addContent(t){return this.element.appendChild(document.createTextNode(t)),this}addSpan(t){const e=new ui(this.scene);return this.tspans.push(e),this.element.appendChild(e.getSVGElement()),e.setContent(t),e}clearText(){return this.tspans.length=0,this.element.replaceChildren(),this}getBBox(){return this.element.getBBox()??new DOMRect}getDimensions(){const t=this.element.getBBox();return new p(t.width,t.height)}updateDimensions(){const t=this.element.getBBox();return this.viewExtents.x=t.width/2,this.viewExtents.y=t.height/2,this}setTextAnchor(t){return this.element.setAttribute("text-anchor",t),this}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element),this.updateDimensions();const t=this.getPosition("view");return this.element.setAttribute("x",t.x.toString()),this.element.setAttribute("y",t.y.toString()),this}}class ui extends _t{element;constructor(t){const e=document.createElementNS(Rt,"tspan");super(t),this.element=e}getSVGElement(){return this.element}setContent(t){return this.element.textContent=t,this}update(){return this.updateSVGTransform(this.element),this.updateSVGStyle(this.element),this}}class ts extends Ve{constructor(t){const e=document.createElementNS(Rt,"g");super(t,e)}getSVGElement(){return this.element}}class pi extends _t{anchor="center";minExtents;textExtents;textAlign="center";verticalAlign="middle";mainGroup;lines;lineHeight=24;ascenderHeight=18;constructor(t){const e=new ts(t);super(t),this.mainGroup=e,this.textExtents=new mt(0,0,"view"),this.minExtents=new mt(0,0,"view"),this.lines=[]}getSVGElement(){return this.mainGroup.getSVGElement()}setAttributes(t){return super.setAttributes(t),t.textFillColor&&(this.fillColor=t.textFillColor.clone()),t.textStrokeColor&&(this.strokeColor=t.textStrokeColor.clone()),t.textFillOpacity&&(this.fillOpacity=t.textFillOpacity),t.textOpacity&&(this.opacity=t.textOpacity),t.textStrokeWidth&&(this.strokeWidth=t.textStrokeWidth.clone()),this}addLine(t){const e=new Rs(this.scene);e.setSVGAttribute("text-anchor","start"),this.mainGroup.appendChild(e);const s={text:e,skip:t?.skip??0,align:t?.align};return this.lines.push(s),e}setMinExtents(t,e,s){return s&&(this.minExtents.space=s),this.minExtents.value.set(t,e),this}setMinExtentsV(t,e){return e&&(this.minExtents.space=e),this.minExtents.value.copy(t),this}setLineHeight(t,e){return this.lineHeight=t,this.ascenderHeight=e,this}setAnchor(t){return this.anchor=t,this}setTextAlign(t){return this.textAlign=t,this}setTextVerticalAlign(t){return this.verticalAlign=t,this}getTextExtents(t=this.textExtents.space){return this.textExtents.toSpace(t,this.getActiveCamera())}getMinExtents(t=this.minExtents.space){return this.minExtents.toSpace(t,this.getActiveCamera())}getCenter(t=this.position.space){return Ze.getCenter(this.anchor,t,this.getActiveCamera(),this.position,this.minExtents)}getTextGroup(){return this.mainGroup}getLineHeight(){return this.lineHeight}getTextAlign(){return this.textAlign}getTextVerticalAlign(){return this.verticalAlign}updateTextExtents(){let t=0,e=0;for(const i of this.lines){const r=i.text.getBBox();t=r.width>t?r.width:t,e+=i.skip}const s=new p(t,this.lines.length*this.lineHeight+e).scale(.5);this.textExtents.setValueFromSpace("view",this.getActiveCamera(),s.x,s.y)}update(){const t=this.mainGroup.getSVGElement();this.updateSVGTransform(t),this.updateSVGStyle(t),this.updateTextExtents();const e=this.getTextExtents("view"),s=this.getMinExtents("view").maxV(e),i=this.getCenter("view").subV(s);let r=0,o=i.y+this.ascenderHeight;switch(this.verticalAlign){case"top":break;case"middle":o+=s.y-e.y;break;case"bottom":o+=2*(s.y-e.y);break}for(const l of this.lines){const h=l.text;switch(l.align??this.textAlign){case"left":r=i.x,h.setTextAnchor("start");break;case"center":r=i.x+s.x,h.setTextAnchor("middle");break;case"right":r=i.x+2*s.x,h.setTextAnchor("end");break}h.setPosition(r,o,"view"),h.update(),o+=l.skip+this.lineHeight}return this}}class Ls extends _t{element;endPosition;constructor(t){super(t),this.element=document.createElementNS(Rt,"line"),this.endPosition=new j(0,0,"world")}getSVGElement(){return this.element}update(){this.updateSVGTransform(this.element),this.updateSVGStyle(this.element);const t=this.getStart("view"),e=this.getEnd("view");return this.element.setAttribute("x1",t.x.toString()),this.element.setAttribute("y1",t.y.toString()),this.element.setAttribute("x2",e.x.toString()),this.element.setAttribute("y2",e.y.toString()),this}setStart(t,e,s){return this.setPosition(t,e,s)}setStartV(t,e){return this.setPositionV(t,e)}setEnd(t,e,s){return s&&(this.endPosition.space=s),this.endPosition.value.set(t,e),this}setEndV(t,e){return e&&(this.endPosition.space=e),this.endPosition.value.copy(t),this}getStart(t=this.position.space){return this.position.toSpace(t,this.getActiveCamera())}getEnd(t=this.position.space){return this.endPosition.toSpace(t,this.getActiveCamera())}changeStartSpace(t){return this.changePositionSpace(t)}changeEndSpace(t){return this.endPosition.changeSpace(t,this.getActiveCamera()),this}}class Xe extends _t{anchor;nodeExtents;minExtents;padding;partSep;radius;textAlign="center";verticalAlign="middle";lineHeight=24;ascenderHeight=18;mainGroup;textGroups;textGrows;sepLines;backRect=null;backCircle=null;constructor(t,e=1){super(t),this.mainGroup=new ts(t),this.textGroups=[],this.textGrows=[];for(let s=0;s<e;s++){const i=new pi(this.scene);i.addClass("s2-node-text").setLayer(2),this.textGroups.push(i),this.textGrows.push(1),this.mainGroup.appendChild(i)}this.sepLines=[];for(let s=0;s<e-1;s++){const i=new Ls(this.scene).setLayer(1);this.sepLines.push(i),this.mainGroup.appendChild(i)}this.anchor="center",this.nodeExtents=new mt(0,0,"view"),this.minExtents=new mt(0,0,"view"),this.padding=new mt(10,5,"view"),this.partSep=new O(5,"view"),this.radius=new O(0,"view"),this.addClass("s2-node")}getSVGElement(){return this.mainGroup.getSVGElement()}setTextFillColor(t){for(const e of this.textGroups)e.setFillColor(t);return this}setTextFillOpacity(t){for(const e of this.textGroups)e.setFillOpacity(t);return this}setTextStrokeColor(t){for(const e of this.textGroups)e.setStrokeColor(t);return this}setTextOpacity(t){for(const e of this.textGroups)e.setOpacity(t);return this}setTextStrokeWidth(t,e){for(const s of this.textGroups)s.setStrokeWidth(t,e);return this}setTextStrokeWidthL(t){for(const e of this.textGroups)e.setStrokeWidthL(t);return this}addLine(t){const e=He(t?.partIndex??0,0,this.textGroups.length-1);return this.textGroups[e].addLine(t)}addTextClass(t){for(const e of this.textGroups)e.addClass(t);return this}createRectBackground(){return this.backRect===null&&(this.backRect=new ks(this.scene).setLayer(0),this.backRect.addClass("s2-node-background").setAnchor(this.anchor),this.backRect.setAttributes(this.getAttributes()),this.mainGroup.appendChild(this.backRect)),this.backRect}createCircleBackground(){return this.backCircle===null&&(this.backCircle=new Es(this.scene).setLayer(0),this.backCircle.addClass("s2-node-background"),this.backCircle.setAttributes(this.getAttributes()),this.mainGroup.appendChild(this.backCircle)),this.backCircle}setMinExtents(t,e,s){return s&&(this.minExtents.space=s),this.minExtents.value.set(t,e),this}setMinExtentsV(t,e){return e&&(this.minExtents.space=e),this.minExtents.value.copy(t),this}setPadding(t,e,s){return s&&(this.padding.space=s),this.padding.value.set(t,e),this}setPaddingV(t,e){return e&&(this.padding.space=e),this.padding.value.copy(t),this}setLineHeight(t,e){this.lineHeight=t,this.ascenderHeight=e;for(const s of this.textGroups)s.setLineHeight(this.lineHeight,this.ascenderHeight);return this}setAnchor(t){return this.anchor=t,this}setTextAlign(t){this.textAlign=t;for(const e of this.textGroups)e.setTextAlign(t);return this}setTextVerticalAlign(t){this.verticalAlign=t;for(const e of this.textGroups)e.setTextVerticalAlign(t);return this}setTextGrowFactor(t,e=1){return this.textGrows[t]=e,this}setRadius(t,e){return this.backRect&&this.backRect.setRadius(t,e),this}setAttributes(t){return super.setAttributes(t),this.backCircle?this.backCircle.setAttributes(t):this.backRect&&this.backRect.setAttributes(t),this.setTextFillColor(t.textFillColor).setTextFillOpacity(t.textFillOpacity).setTextOpacity(t.textOpacity).setTextStrokeColor(t.textStrokeColor).setTextStrokeWidthL(t.textStrokeWidth),this}setBackgroundStyle(t){return this.backCircle?this.backCircle.setSVGAttributes(t):this.backRect&&this.backRect.setSVGAttributes(t),this}setTextStyle(t){for(const e of this.textGroups)e.setSVGAttributes(t);return this}setSeparatorStyle(t){for(const e of this.sepLines)e.setSVGAttributes(t);return this}getBackgroundCircle(){return this.backCircle}getBackgroundRect(){return this.backRect}getTextGroup(t=0){return this.textGroups[t]}getTextGroupCount(){return this.textGroups.length}getMinExtents(t=this.minExtents.space){return this.minExtents.toSpace(t,this.getActiveCamera())}getNodeExtents(t=this.nodeExtents.space){return this.nodeExtents.toSpace(t,this.getActiveCamera())}getPadding(t=this.padding.space){return this.padding.toSpace(t,this.getActiveCamera())}getCenter(t=this.position.space){return Ze.getCenter(this.anchor,t,this.getActiveCamera(),this.position,this.nodeExtents)}getPartSep(t=this.partSep.space){return this.partSep.toSpace(t,this.getActiveCamera())}getLineHeight(){return this.lineHeight}getTextAlign(){return this.textAlign}getTextVerticalAlign(){return this.verticalAlign}setAnimatableAttributes(t){return super.setAnimatableAttributes(t),this.backCircle?this.backCircle.setAnimatableAttributes(t):this.backRect&&this.backRect.setAnimatableAttributes(t),this}getPointInDirection(t,e=this.position.space,s){return this.backRect?this.backRect.getPointInDirection(t,e,s):this.backCircle?this.backCircle.getPointInDirection(t,e,s):this.getPosition(e)}update(){const t=this.backCircle?this.backCircle:this.backRect;t&&t.setStrokeColor(this.strokeColor).setStrokeWidthL(this.strokeWidth).setFillColor(this.fillColor).setFillOpacity(this.fillOpacity).setRadiusL(this.radius);const e=[];let s=0;for(let u=0;u<this.textGroups.length;u++){const d=this.textGroups[u];d.updateTextExtents();const m=d.getTextExtents("view");s=Math.max(s,2*m.x),e.push(2*m.y)}const i=this.getMinExtents("view"),r=this.getPadding("view"),o=this.getPartSep("view"),l=ri.computeSizes(e,this.textGrows,2*i.y,r.y,2*o),h=new p(Math.max(s/2+r.x,i.x),l/2);this.nodeExtents.setValueFromSpace("view",this.getActiveCamera(),h.x,h.y);const a=this.getCenter("view"),c=a.clone().subV(h).addV(r);for(let u=0;u<this.textGroups.length;u++)this.textGroups[u].setPositionV(c,"view").setMinExtents(h.x-r.x,e[u]/2,"view").setAnchor("north west"),c.y+=e[u]+2*o;if(this.backRect){this.backRect.setPositionV(a,"view"),this.backRect.setExtentsV(h,"view"),this.backRect.setAnchor("center");let u=a.y-h.y+r.y+e[0]+o;for(let d=0;d<this.textGroups.length-1;d++)this.sepLines[d].setStart(a.x-h.x,u,"view").setEnd(a.x+h.x,u,"view"),u+=e[d+1]+2*o}if(this.backCircle){const u=Math.max(h.x,h.y);this.backCircle.setPositionV(a,"view"),this.backCircle.setRadius(u,"view");let d=a.y-h.y+r.y+e[0]+o;for(let m=0;m<this.textGroups.length-1;m++){const y=Math.sqrt(u*u-(d-a.y)*(d-a.y));this.sepLines[m].setStart(a.x-y,d,"view").setEnd(a.x+y,d,"view"),d+=e[m+1]+2*o}}return this.mainGroup.update(),this}}class di extends wt{rules;element;constructor(t){const e=document.createElementNS(Rt,"style");super(t),this.element=e,this.rules={}}getSVGElement(){return this.element}addRule(t,e){return this.rules[t]=e,this}getRule(t){if(t in this.rules)return this.rules[t];{const e={};return this.rules[t]=e,e}}removeRule(t){return delete this.rules[t],this}update(){const t=[];for(const[e,s]of Object.entries(this.rules)){const i=e+" {"+Object.entries(s).map(([r,o])=>`${r}: ${o}`).join("; ")+"; }";t.push(document.createTextNode(i))}return this.element.replaceChildren(...t),this}}class mi extends wt{element;fillColor=new B(255,255,255);fillOpacity;constructor(t){super(t),this.element=document.createElementNS(Rt,"rect"),this.addClass("s2-fill-rect")}getSVGElement(){return this.element}setAttributes(t){return super.setAttributes(t),t.fillColor&&this.fillColor.copy(t.fillColor),t.fillOpacity&&(this.fillOpacity=t.fillOpacity),this}getAttributes(){const t=super.getAttributes();return this.fillColor!==void 0&&(t.fillColor=this.fillColor.clone()),this.fillOpacity!==void 0&&(t.fillOpacity=this.fillOpacity),t}setFillColor(t){return this.fillColor.copy(t),this}update(){const t=this.getActiveCamera();return this.element.setAttribute("x","0"),this.element.setAttribute("y","0"),this.element.setAttribute("width",t.viewport.x.toString()),this.element.setAttribute("height",t.viewport.y.toString()),this.element.setAttribute("fill",this.fillColor.toRgb()),this.fillOpacity!==void 0&&this.element.setAttribute("fill-opacity",this.fillOpacity.toString()),this}}class Vs extends _t{start;end;path;options;constructor(t,e,s,i){const r=new Qe(t);super(t),this.path=r,this.start=e,this.end=s,this.options=i}setAttributes(t){return this.path.setAttributes(t),this}getAttributes(){return this.path.getAttributes()}setAnimatableAttributes(t){return this.path.setAnimatableAttributes(t),this}getAnimatableAttributes(){return this.path.getAnimatableAttributes()}getPointCenter(t,e){return t instanceof Xe?t.getCenter(e):t.toSpace(e,this.getActiveCamera())}getPoint(t,e,s,i){if(t instanceof Xe)return s!==void 0&&i!==void 0?t.getPointInDirection(i,e,s):t.getCenter(e);{const r=t.toSpace(e,this.getActiveCamera());if(s&&i){const o=s.toSpace(e,this.getActiveCamera());r.addV(i.clone().normalize().scale(o))}return r}}getStartToEnd(t){const e=this.getPointCenter(this.start,t);return this.getPointCenter(this.end,t).subV(e)}getPath(){return this.path}setPathTo(t){return this.path.setPathTo(t),this}setPathFrom(t){return this.path.setPathFrom(t),this}setPathRange(t,e){return this.path.setPathRange(t,e),this}getPathFrom(){return this.path.getPathFrom()}getPathTo(){return this.path.getPathTo()}getPathRange(){return this.path.getPathRange()}getSVGElement(){return this.path.getSVGElement()}}class fi extends Vs{constructor(t,e,s,i){super(t,e,s,i),this.addClass("s2-line-edge")}update(){const t=this.getStartToEnd("world").normalize(),e=t.clone();this.options.startAngle!==void 0&&e.setFromPolarDeg(this.options.startAngle);const s=t.clone().negate();this.options.endAngle!==void 0&&s.setFromPolarDeg(this.options.endAngle);const i=this.getPoint(this.start,"world",this.options.startDistance,e),r=this.getPoint(this.end,"world",this.options.endDistance,s);return this.path.clear().setSpace("world").setStartV(i).lineToV(r).update(),this}}class gi extends Vs{constructor(t,e,s,i){super(t,e,s,i),this.addClass("s2-cubic-edge")}update(){const t="view",i=this.getStartToEnd(t).clone().normalize(),r=i.clone().negate();this.options.startAngle!==void 0&&i.setFromPolarDeg(-1*this.options.startAngle),this.options.endAngle!==void 0&&r.setFromPolarDeg(-1*this.options.endAngle);const o=this.options.curveAngle??0;i.rotateDeg(-1*(this.options.curveStartAngle??o)),r.rotateDeg(-1*(this.options.curveEndAngle??-o));const l=this.getPoint(this.start,t,this.options.startDistance,i),h=this.getPoint(this.end,t,this.options.endDistance,r),a=l.distance(h),c=this.options.curveTension??.3,u=this.options.curveStartTension??c,d=this.options.curveEndTension??c;return i.scale(u*a),r.scale(d*a),this.path.clear().setSpace(t).setStartV(l).cubicToV(i,r,h).update(),this}}class xi{svg;activeCamera;nextId;constructor(t,e){this.activeCamera=e,this.svg=new hi(this,t),t.innerHTML="",this.svg.update(),this.nextId=0}addCircle(t=this.svg){const e=new Es(this);return t.appendChild(e),e}addRect(t=this.svg){const e=new ks(this);return t.appendChild(e),e}addFillRect(t=this.svg){const e=new mi(this);return t.appendChild(e),e}addGrid(t=this.svg){const e=new ci(this);return t.appendChild(e),e}addText(t=this.svg){const e=new Rs(this);return t.appendChild(e),e}addNode(t=1,e=this.svg){const s=new Xe(this,t);return e.appendChild(s),s}addPath(t=this.svg){const e=new Qe(this);return t.appendChild(e),e}addGroup(t=this.svg){const e=new ts(this);return t.appendChild(e),e}addLine(t=this.svg){const e=new Ls(this);return t.appendChild(e),e}addLineEdge(t,e,s,i=this.svg){const r=new fi(this,t,e,s);return i.appendChild(r),r}addCubicEdge(t,e,s,i=this.svg){const r=new gi(this,t,e,s);return i.appendChild(r),r}addStyle(){const t=new di(this);return this.svg.appendChild(t),t}getSVG(){return this.svg}update(){return this.svg.update(),this}}/**
 * anime.js - ESM
 * @version v4.1.0
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Lt=typeof window<"u",Ie=Lt?window:null,ne=Lt?document:null,b={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},T={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},tt={NONE:0,AUTO:1,FORCE:2},q={replace:0,none:1,blend:2},cs=Symbol(),es=Symbol(),Fs=Symbol(),Fe=Symbol(),vi=Symbol(),S=1e-11,Os=1e12,re=1e3,Ye=120,Ht="",Ns=(()=>{const n=new Map;return n.set("x","translateX"),n.set("y","translateY"),n.set("z","translateZ"),n})(),Gs=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Ds=Gs.reduce((n,t)=>({...n,[t]:t+"("}),{}),lt=()=>{},yi=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,Ti=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Ci=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Si=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,wi=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,us=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,_i=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,bi=/([a-z])([A-Z])/g,Ai=/(\w+)(\([^)]+\)+)/g,Ei=/(\*=|\+=|-=)/,Is={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Ye,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:re,delay:0,loopDelay:0,ease:"out(2)",composition:q.replace,modifier:n=>n,onBegin:lt,onBeforeUpdate:lt,onUpdate:lt,onLoop:lt,onPause:lt,onComplete:lt,onRender:lt},ki={root:ne},F={defaults:Is,precision:4,timeScale:1,tickThreshold:200},Ms={version:"4.1.0",engine:null};Lt&&(Ie.AnimeJS||(Ie.AnimeJS=[]),Ie.AnimeJS.push(Ms));const Pi=n=>n.replace(bi,"$1-$2").toLowerCase(),$t=(n,t)=>n.indexOf(t)===0,fe=Date.now,ge=Array.isArray,de=n=>n&&n.constructor===Object,ss=n=>typeof n=="number"&&!isNaN(n),xe=n=>typeof n=="string",oe=n=>typeof n=="function",v=n=>typeof n>"u",Ae=n=>v(n)||n===null,Ws=n=>Lt&&n instanceof SVGElement,Us=n=>yi.test(n),Bs=n=>$t(n,"rgb"),qs=n=>$t(n,"hsl"),Ri=n=>Us(n)||Bs(n)||qs(n),Ee=n=>!F.defaults.hasOwnProperty(n),Ce=n=>xe(n)?parseFloat(n):n,te=Math.pow,Li=Math.sqrt,Vi=Math.sin,Fi=Math.cos,Oi=Math.abs,Ni=Math.ceil,Hs=Math.floor,Gi=Math.asin,is=Math.PI,ps=Math.round,D=(n,t,e)=>n<t?t:n>e?e:n,ds={},E=(n,t)=>{if(t<0)return n;if(!t)return ps(n);let e=ds[t];return e||(e=ds[t]=10**t),ps(n*e)/e},Wt=(n,t,e)=>n+(t-n)*e,Oe=n=>n===1/0?Os:n===-1/0?-1e12:n,se=n=>n<=S?S:Oe(E(n,11)),U=n=>ge(n)?[...n]:n,Xs=(n,t)=>{const e={...n};for(let s in t){const i=n[s];e[s]=v(i)?t[s]:i}return e},_=(n,t,e,s="_prev",i="_next")=>{let r=n._head,o=i;for(e&&(r=n._tail,o=s);r;){const l=r[o];t(r),r=l}},Nt=(n,t,e="_prev",s="_next")=>{const i=t[e],r=t[s];i?i[s]=r:n._head=r,r?r[e]=i:n._tail=i,t[e]=null,t[s]=null},Xt=(n,t,e,s="_prev",i="_next")=>{let r=n._tail;for(;r&&e&&e(r,t);)r=r[s];const o=r?r[i]:n._head;r?r[i]=t:n._head=t,o?o[s]=t:n._tail=t,t[s]=r,t[i]=o};class Ys{constructor(t=0){this.deltaTime=0,this._currentTime=t,this._elapsedTime=t,this._startTime=t,this._lastTime=t,this._scheduledTime=0,this._frameDuration=E(re/Ye,0),this._fps=Ye,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(t){const e=this._frameDuration,s=+t,i=s<S?S:s,r=E(re/i,0);this._fps=i,this._frameDuration=r,this._scheduledTime+=r-e}get speed(){return this._speed}set speed(t){const e=+t;this._speed=e<S?S:e}requestTick(t){const e=this._scheduledTime,s=this._elapsedTime;if(this._elapsedTime+=t-s,s<e)return tt.NONE;const i=this._frameDuration,r=s-e;return this._scheduledTime+=r<i?i:r,tt.AUTO}computeDeltaTime(t){const e=t-this._lastTime;return this.deltaTime=e,this._lastTime=t,e}}const ke=(n,t,e,s,i)=>{const r=n.parent,o=n.duration,l=n.completed,h=n.iterationDuration,a=n.iterationCount,c=n._currentIteration,u=n._loopDelay,d=n._reversed,m=n._alternate,y=n._hasChildren,C=n._delay,H=n._currentTime,et=C+h,st=t-C,R=D(H,-C,o),ct=D(st,-C,o),A=st-H,ut=ct>0,ft=ct>=o,gt=o<=S,Vt=i===tt.FORCE;let Gt=0,bt=st,J=0;if(a>1){const Dt=~~(ct/(h+(ft?0:u)));n._currentIteration=D(Dt,0,a),ft&&n._currentIteration--,Gt=n._currentIteration%2,bt=ct%(h+u)||0}const zt=d^(m&&Gt),it=n._ease;let L=ft?zt?0:o:zt?h-bt:bt;it&&(L=h*it(L/h)||0);const pt=(r?r.backwards:st<H)?!zt:!!zt;if(n._currentTime=st,n._iterationTime=L,n.backwards=pt,ut&&!n.began?(n.began=!0,!e&&!(r&&(pt||!r.began))&&n.onBegin(n)):st<=0&&(n.began=!1),!e&&!y&&ut&&n._currentIteration!==c&&n.onLoop(n),Vt||i===tt.AUTO&&(t>=C&&t<=et||t<=C&&R>C||t>=et&&R!==o)||L>=et&&R!==o||L<=C&&R>0||t<=R&&R===o&&l||ft&&!l&&gt){if(ut&&(n.computeDeltaTime(R),e||n.onBeforeUpdate(n)),!y){const Dt=Vt||(pt?A*-1:A)>=F.tickThreshold,M=n._offset+(r?r._offset:0)+C+L;let f=n._head,N,K,jt,It,nt=0;for(;f;){const X=f._composition,rt=f._currentTime,Z=f._changeDuration,he=f._absoluteStartTime+f._changeDuration,xt=f._nextRep,ot=f._prevRep,At=X!==q.none;if((Dt||(rt!==Z||M<=he+(xt?xt._delay:0))&&(rt!==0||M>=f._absoluteStartTime))&&(!At||!f._isOverridden&&(!f._isOverlapped||M<=he)&&(!xt||xt._isOverridden||M<=xt._absoluteStartTime)&&(!ot||ot._isOverridden||M>=ot._absoluteStartTime+ot._changeDuration+f._delay))){const Et=f._currentTime=D(L-f._startTime,0,Z),P=f._ease(Et/f._updateDuration),Y=f._modifier,dt=f._valueType,W=f._tweenType,$=W===b.OBJECT,Jt=dt===T.NUMBER,vt=Jt&&$||P===0||P===1?-1:F.precision;let z,Kt;if(Jt)z=Kt=Y(E(Wt(f._fromNumber,f._toNumber,P),vt));else if(dt===T.UNIT)Kt=Y(E(Wt(f._fromNumber,f._toNumber,P),vt)),z=`${Kt}${f._unit}`;else if(dt===T.COLOR){const k=f._fromNumbers,yt=f._toNumbers,Tt=E(D(Y(Wt(k[0],yt[0],P)),0,255),0),kt=E(D(Y(Wt(k[1],yt[1],P)),0,255),0),ve=E(D(Y(Wt(k[2],yt[2],P)),0,255),0),Zt=D(Y(E(Wt(k[3],yt[3],P),vt)),0,1);if(z=`rgba(${Tt},${kt},${ve},${Zt})`,At){const Mt=f._numbers;Mt[0]=Tt,Mt[1]=kt,Mt[2]=ve,Mt[3]=Zt}}else if(dt===T.COMPLEX){z=f._strings[0];for(let k=0,yt=f._toNumbers.length;k<yt;k++){const Tt=Y(E(Wt(f._fromNumbers[k],f._toNumbers[k],P),vt)),kt=f._strings[k+1];z+=`${kt?Tt+kt:Tt}`,At&&(f._numbers[k]=Tt)}}if(At&&(f._number=Kt),!s&&X!==q.blend){const k=f.property;N=f.target,$?N[k]=z:W===b.ATTRIBUTE?N.setAttribute(k,z):(K=N.style,W===b.TRANSFORM?(N!==jt&&(jt=N,It=N[Fe]),It[k]=z,nt=1):W===b.CSS?K[k]=z:W===b.CSS_VAR&&K.setProperty(k,z)),ut&&(J=1)}else f._value=z}if(nt&&f._renderTransforms){let Et=Ht;for(let P in It)Et+=`${Ds[P]}${It[P]}) `;K.transform=Et,nt=0}f=f._next}!e&&J&&n.onRender(n)}!e&&ut&&n.onUpdate(n)}return r&&gt?!e&&(r.began&&!pt&&st>=o&&!l||pt&&st<=S&&l)&&(n.onComplete(n),n.completed=!pt):ut&&ft?a===1/0?n._startTime+=n.duration:n._currentIteration>=a-1&&(n.paused=!0,!l&&!y&&(n.completed=!0,!e&&!(r&&(pt||!r.began))&&(n.onComplete(n),n._resolve(n)))):n.completed=!1,J},Bt=(n,t,e,s,i)=>{const r=n._currentIteration;if(ke(n,t,e,s,i),n._hasChildren){const o=n,l=o.backwards,h=s?t:o._iterationTime,a=fe();let c=0,u=!0;if(!s&&o._currentIteration!==r){const d=o.iterationDuration;_(o,m=>{if(!l)!m.completed&&!m.backwards&&m._currentTime<m.iterationDuration&&ke(m,d,e,1,tt.FORCE),m.began=!1,m.completed=!1;else{const y=m.duration,C=m._offset+m._delay,H=C+y;!e&&y<=S&&(!C||H===d)&&m.onComplete(m)}}),e||o.onLoop(o)}_(o,d=>{const m=E((h-d._offset)*d._speed,12),y=d._fps<o._fps?d.requestTick(a):i;c+=ke(d,m,e,s,y),!d.completed&&u&&(u=!1)},l),!e&&c&&o.onRender(o),u&&o._currentTime>=o.duration&&(o.paused=!0,o.completed||(o.completed=!0,e||(o.onComplete(o),o._resolve(o))))}},ie={animation:null,update:lt},Di=n=>{let t=ie.animation;return t||(t={duration:S,computeDeltaTime:lt,_offset:0,_delay:0,_head:null,_tail:null},ie.animation=t,ie.update=()=>{n.forEach(e=>{for(let s in e){const i=e[s],r=i._head;if(r){const o=r._valueType,l=o===T.COMPLEX||o===T.COLOR?U(r._fromNumbers):null;let h=r._fromNumber,a=i._tail;for(;a&&a!==r;){if(l)for(let c=0,u=a._numbers.length;c<u;c++)l[c]+=a._numbers[c];else h+=a._number;a=a._prevAdd}r._toNumber=h,r._toNumbers=l}}}),ke(t,1,1,0,tt.FORCE)}),t},$s=Lt?requestAnimationFrame:setImmediate,Ii=Lt?cancelAnimationFrame:clearImmediate;class Mi extends Ys{constructor(t){super(t),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=Is,this.paused=!!(Lt&&ne.hidden),this.reqId=null}update(){const t=this._currentTime=fe();if(this.requestTick(t)){this.computeDeltaTime(t);const e=this._speed,s=this._fps;let i=this._head;for(;i;){const r=i._next;i.paused?(Nt(this,i),this._hasChildren=!!this._tail,i._running=!1,i.completed&&!i._cancelled&&i.cancel()):Bt(i,(t-i._startTime)*i._speed*e,0,0,i._fps<s?i.requestTick(t):tt.AUTO),i=r}ie.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=$s(zs)),this}pause(){return this.paused=!0,Wi()}resume(){if(this.paused)return this.paused=!1,_(this,t=>t.resetTime()),this.wake()}get speed(){return this._speed*(F.timeScale===1?1:re)}set speed(t){this._speed=t*F.timeScale,_(this,e=>e.speed=e._speed)}get timeUnit(){return F.timeScale===1?"ms":"s"}set timeUnit(t){const s=t==="s",i=s?.001:1;if(F.timeScale!==i){F.timeScale=i,F.tickThreshold=200*i;const r=s?.001:re;this.defaults.duration*=r,this._speed*=r}}get precision(){return F.precision}set precision(t){F.precision=t}}const V=(()=>{const n=new Mi(fe());return Lt&&(Ms.engine=n,ne.addEventListener("visibilitychange",()=>{n.pauseOnDocumentHidden&&(ne.hidden?n.pause():n.resume())})),n})(),zs=()=>{V._head?(V.reqId=$s(zs),V.update()):V.reqId=0},Wi=()=>(Ii(V.reqId),V.reqId=0,V),Ui=(n,t,e)=>{const s=n.style.transform;let i;if(s){const r=n[Fe];let o;for(;o=Ai.exec(s);){const l=o[1],h=o[2].slice(1,-1);r[l]=h,l===t&&(i=h,e&&(e[t]=h))}}return s&&!v(i)?i:$t(t,"scale")?"1":$t(t,"rotate")||$t(t,"skew")?"0deg":"0px"};function ms(n){const t=xe(n)?ki.root.querySelectorAll(n):n;if(t instanceof NodeList||t instanceof HTMLCollection)return t}function ns(n){if(Ae(n))return[];if(ge(n)){const e=n.flat(1/0),s=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];if(!Ae(o)){const l=ms(o);if(l)for(let h=0,a=l.length;h<a;h++){const c=l[h];if(!Ae(c)){let u=!1;for(let d=0,m=s.length;d<m;d++)if(s[d]===c){u=!0;break}u||s.push(c)}}else{let h=!1;for(let a=0,c=s.length;a<c;a++)if(s[a]===o){h=!0;break}h||s.push(o)}}}return s}if(!Lt)return[n];const t=ms(n);return t?Array.from(t):[n]}function Bi(n){const t=ns(n),e=t.length;if(e)for(let s=0;s<e;s++){const i=t[s];if(!i[cs]){i[cs]=!0;const r=Ws(i);(i.nodeType||r)&&(i[es]=!0,i[Fs]=r,i[Fe]={})}}return t}const qi=["opacity","rotate","overflow","color"],Hi=(n,t)=>{if(qi.includes(t))return!1;if(n.getAttribute(t)||t in n){if(t==="scale"){const e=n.parentNode;return e&&e.tagName==="filter"}return!0}},Xi=n=>{const t=Ti.exec(n)||Ci.exec(n),e=v(t[4])?1:+t[4];return[+t[1],+t[2],+t[3],e]},Yi=n=>{const t=n.length,e=t===4||t===5;return[+("0x"+n[1]+n[e?1:2]),+("0x"+n[e?2:3]+n[e?2:4]),+("0x"+n[e?3:5]+n[e?3:6]),t===5||t===9?+(+("0x"+n[e?4:7]+n[e?4:8])/255).toFixed(3):1]},Me=(n,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n),$i=n=>{const t=Si.exec(n)||wi.exec(n),e=+t[1]/360,s=+t[2]/100,i=+t[3]/100,r=v(t[4])?1:+t[4];let o,l,h;if(s===0)o=l=h=i;else{const a=i<.5?i*(1+s):i+s-i*s,c=2*i-a;o=E(Me(c,a,e+1/3)*255,0),l=E(Me(c,a,e)*255,0),h=E(Me(c,a,e-1/3)*255,0)}return[o,l,h,r]},zi=n=>Bs(n)?Xi(n):Us(n)?Yi(n):qs(n)?$i(n):[0,0,0,1],I=(n,t)=>v(n)?t:n,Ft=(n,t,e,s,i)=>{if(oe(n)){const r=()=>{const o=n(t,e,s);return isNaN(+o)?o||0:+o};return i&&(i.func=r),r()}else return n},js=(n,t)=>n[es]?n[Fs]&&Hi(n,t)?b.ATTRIBUTE:Gs.includes(t)||Ns.get(t)?b.TRANSFORM:$t(t,"--")?b.CSS_VAR:t in n.style?b.CSS:t in n?b.OBJECT:b.ATTRIBUTE:b.OBJECT,fs=(n,t,e)=>{const s=n.style[t];s&&e&&(e[t]=s);const i=s||getComputedStyle(n[vi]||n).getPropertyValue(t);return i==="auto"?"0":i},le=(n,t,e,s)=>{const i=v(e)?js(n,t):e;return i===b.OBJECT?n[t]||0:i===b.ATTRIBUTE?n.getAttribute(t):i===b.TRANSFORM?Ui(n,t,s):i===b.CSS_VAR?fs(n,t,s).trimStart():fs(n,t,s)},$e=(n,t,e)=>e==="-"?n-t:e==="+"?n+t:n*t,rs=()=>({t:T.NUMBER,n:0,u:null,o:null,d:null,s:null}),Ct=(n,t)=>{if(t.t=T.NUMBER,t.n=0,t.u=null,t.o=null,t.d=null,t.s=null,!n)return t;const e=+n;if(isNaN(e)){let s=n;s[1]==="="&&(t.o=s[0],s=s.slice(2));const i=s.includes(" ")?!1:_i.exec(s);if(i)return t.t=T.UNIT,t.n=+i[1],t.u=i[2],t;if(t.o)return t.n=+s,t;if(Ri(s))return t.t=T.COLOR,t.d=zi(s),t;{const r=s.match(us);return t.t=T.COMPLEX,t.d=r?r.map(Number):[],t.s=s.split(us)||[],t}}else return t.n=e,t},gs=(n,t)=>(t.t=n._valueType,t.n=n._toNumber,t.u=n._unit,t.o=null,t.d=U(n._toNumbers),t.s=U(n._strings),t),Ut=rs(),Re={_rep:new WeakMap,_add:new Map},os=(n,t,e="_rep")=>{const s=Re[e];let i=s.get(n);return i||(i={},s.set(n,i)),i[t]?i[t]:i[t]={_head:null,_tail:null}},ji=(n,t)=>n._isOverridden||n._absoluteStartTime>t._absoluteStartTime,Pe=n=>{n._isOverlapped=1,n._isOverridden=1,n._changeDuration=S,n._currentTime=S},Js=(n,t)=>{const e=n._composition;if(e===q.replace){const s=n._absoluteStartTime;Xt(t,n,ji,"_prevRep","_nextRep");const i=n._prevRep;if(i){const r=i.parent,o=i._absoluteStartTime+i._changeDuration;if(n.parent.id!==r.id&&r.iterationCount>1&&o+(r.duration-r.iterationDuration)>s){Pe(i);let a=i._prevRep;for(;a&&a.parent.id===r.id;)Pe(a),a=a._prevRep}const l=s-n._delay;if(o>l){const a=i._startTime,c=o-(a+i._updateDuration);i._changeDuration=l-c-a,i._currentTime=i._changeDuration,i._isOverlapped=1,i._changeDuration<S&&Pe(i)}let h=!0;if(_(r,a=>{a._isOverlapped||(h=!1)}),h){const a=r.parent;if(a){let c=!0;_(a,u=>{u!==r&&_(u,d=>{d._isOverlapped||(c=!1)})}),c&&a.cancel()}else r.cancel()}}}else if(e===q.blend){const s=os(n.target,n.property,"_add"),i=Di(Re._add);let r=s._head;r||(r={...n},r._composition=q.replace,r._updateDuration=S,r._startTime=0,r._numbers=U(n._fromNumbers),r._number=0,r._next=null,r._prev=null,Xt(s,r),Xt(i,r));const o=n._toNumber;if(n._fromNumber=r._fromNumber-o,n._toNumber=0,n._numbers=U(n._fromNumbers),n._number=0,r._fromNumber=o,n._toNumbers){const l=U(n._toNumbers);l&&l.forEach((h,a)=>{n._fromNumbers[a]=r._fromNumbers[a]-h,n._toNumbers[a]=0}),r._fromNumbers=l}Xt(s,n,null,"_prevAdd","_nextAdd")}return n},Ks=n=>{const t=n._composition;if(t!==q.none){const e=n.target,s=n.property,o=Re._rep.get(e)[s];if(Nt(o,n,"_prevRep","_nextRep"),t===q.blend){const l=Re._add,h=l.get(e);if(!h)return;const a=h[s],c=ie.animation;Nt(a,n,"_prevAdd","_nextAdd");const u=a._head;if(u&&u===a._tail){Nt(a,u,"_prevAdd","_nextAdd"),Nt(c,u);let d=!0;for(let m in h)if(h[m]._head){d=!1;break}d&&l.delete(e)}}}return n},xs=n=>(n.paused=!0,n.began=!1,n.completed=!1,n),ze=n=>(n._cancelled&&(n._hasChildren?_(n,ze):_(n,t=>{t._composition!==q.none&&Js(t,os(t.target,t.property))}),n._cancelled=0),n);let Ji=0;class as extends Ys{constructor(t={},e=null,s=0){super(0);const{id:i,delay:r,duration:o,reversed:l,alternate:h,loop:a,loopDelay:c,autoplay:u,frameRate:d,playbackRate:m,onComplete:y,onLoop:C,onPause:H,onBegin:et,onBeforeUpdate:st,onUpdate:R}=t,ct=e?0:V._elapsedTime,A=e?e.defaults:F.defaults,ut=oe(r)||v(r)?A.delay:+r,ft=oe(o)||v(o)?1/0:+o,gt=I(a,A.loop),Vt=I(c,A.loopDelay),Gt=gt===!0||gt===1/0||gt<0?1/0:gt+1;let bt=0;if(e)bt=s;else{let J=fe();V.paused&&(V.requestTick(J),J=V._elapsedTime),bt=J-V._startTime}this.id=v(i)?++Ji:i,this.parent=e,this.duration=Oe((ft+Vt)*Gt-Vt)||S,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=et||A.onBegin,this.onBeforeUpdate=st||A.onBeforeUpdate,this.onUpdate=R||A.onUpdate,this.onLoop=C||A.onLoop,this.onPause=H||A.onPause,this.onComplete=y||A.onComplete,this.iterationDuration=ft,this.iterationCount=Gt,this._autoplay=e?!1:I(u,A.autoplay),this._offset=bt,this._delay=ut,this._loopDelay=Vt,this._iterationTime=0,this._currentIteration=0,this._resolve=lt,this._running=!1,this._reversed=+I(l,A.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=I(h,A.alternate),this._prev=null,this._next=null,this._elapsedTime=ct,this._startTime=ct,this._lastTime=ct,this._fps=I(d,A.frameRate),this._speed=I(m,A.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(t){t?this.cancel():this.reset(1).play()}get currentTime(){return D(E(this._currentTime,F.precision),-this._delay,this.duration)}set currentTime(t){const e=this.paused;this.pause().seek(+t),e||this.resume()}get iterationCurrentTime(){return E(this._iterationTime,F.precision)}set iterationCurrentTime(t){this.currentTime=this.iterationDuration*this._currentIteration+t}get progress(){return D(E(this._currentTime/this.duration,10),0,1)}set progress(t){this.currentTime=this.duration*t}get iterationProgress(){return D(E(this._iterationTime/this.iterationDuration,10),0,1)}set iterationProgress(t){const e=this.iterationDuration;this.currentTime=e*this._currentIteration+e*t}get currentIteration(){return this._currentIteration}set currentIteration(t){this.currentTime=this.iterationDuration*D(+t,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(t){t?this.reverse():this.play()}get speed(){return super.speed}set speed(t){super.speed=t,this.resetTime()}reset(t=0){return ze(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,Bt(this,0,1,t,tt.FORCE),xs(this),this._hasChildren&&_(this,xs),this}init(t=0){this.fps=this._fps,this.speed=this._speed,!t&&this._hasChildren&&Bt(this,this.duration,1,t,tt.FORCE),this.reset(t);const e=this._autoplay;return e===!0?this.resume():e&&!v(e.linked)&&e.link(this),this}resetTime(){const t=1/(this._speed*V._speed);return this._startTime=fe()-(this._currentTime+this._delay)*t,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=S&&!this._hasChildren?Bt(this,S,0,0,tt.FORCE):(this._running||(Xt(V,this),V._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,V.wake()),this):this}restart(){return this.reset(0).resume()}seek(t,e=0,s=0){ze(this),this.completed=!1;const i=this.paused;return this.paused=!0,Bt(this,t+this._delay,~~e,~~s,tt.AUTO),i?this:this.resume()}alternate(){const t=this._reversed,e=this.iterationCount,s=this.iterationDuration,i=e===1/0?Hs(Os/s):e;return this._reversed=+(this._alternate&&!(i%2)?t:!t),e===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(s*i-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?_(this,t=>t.cancel(),!0):_(this,Ks),this._cancelled=1,this.pause()}stretch(t){const e=this.duration,s=se(t);if(e===s)return this;const i=t/e,r=t<=S;return this.duration=r?S:s,this.iterationDuration=r?S:se(this.iterationDuration*i),this._offset*=i,this._delay*=i,this._loopDelay*=i,this}revert(){Bt(this,0,1,0,tt.AUTO);const t=this._autoplay;return t&&t.linked&&t.linked===this&&t.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(t=lt){const e=this.then,s=()=>{this.then=null,t(this),this.then=e,this._resolve=lt};return new Promise(i=>(this._resolve=()=>i(s()),this.completed&&this._resolve(),this))}}const ae=n=>n,Zs=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,Ki=(n,t,e)=>{let s=0,i=1,r,o,l=0;do o=s+(i-s)/2,r=Zs(o,t,e)-n,r>0?i=o:s=o;while(Oi(r)>1e-7&&++l<100);return o},Zi=(n=.5,t=0,e=.5,s=1)=>n===t&&e===s?ae:i=>i===0||i===1?i:Zs(Ki(i,n,e),t,s),Qi=(n=10,t)=>{const e=t?Ni:Hs;return s=>e(D(s,0,1)*n)*(1/n)},Qs=(...n)=>{const t=n.length;if(!t)return ae;const e=t-1,s=n[0],i=n[e],r=[0],o=[Ce(s)];for(let l=1;l<e;l++){const h=n[l],a=xe(h)?h.trim().split(" "):[h],c=a[0],u=a[1];r.push(v(u)?l/e:Ce(u)/100),o.push(Ce(c))}return o.push(Ce(i)),r.push(1),function(h){for(let a=1,c=r.length;a<c;a++){const u=r[a];if(h<=u){const d=r[a-1],m=o[a-1];return m+(o[a]-m)*(h-d)/(u-d)}}return o[o.length-1]}},tn=(n=10,t=1)=>{const e=[0],s=n-1;for(let i=1;i<s;i++){const r=e[i-1],o=i/s,l=(i+1)/s,h=o+(l-o)*Math.random(),a=o*(1-t)+h*t;e.push(D(a,r,1))}return e.push(1),Qs(...e)},en=is/2,vs=is*2,ce=(n=1.68)=>t=>te(t,+n),ys={[Ht]:ce,Quad:ce(2),Cubic:ce(3),Quart:ce(4),Quint:ce(5),Sine:n=>1-Fi(n*en),Circ:n=>1-Li(1-n*n),Expo:n=>n?te(2,10*n-10):0,Bounce:n=>{let t,e=4;for(;n<((t=te(2,--e))-1)/11;);return 1/te(4,3-e)-7.5625*te((t*3-2)/22-n,2)},Back:(n=1.70158)=>t=>(+n+1)*t*t*t-+n*t*t,Elastic:(n=1,t=.3)=>{const e=D(+n,1,10),s=D(+t,S,2),i=s/vs*Gi(1/e),r=vs/s;return o=>o===0||o===1?o:-e*te(2,-10*(1-o))*Vi((1-o-i)*r)}},je={in:n=>t=>n(t),out:n=>t=>1-n(1-t),inOut:n=>t=>t<.5?n(t*2)/2:1-n(t*-2+2)/2,outIn:n=>t=>t<.5?(1-n(1-t*2))/2:(n(t*2-1)+1)/2},sn=(n,t,e)=>{if(e[n])return e[n];if(n.indexOf("(")<=-1){const i=je[n]||n.includes("Back")||n.includes("Elastic")?t[n]():t[n];return i?e[n]=i:ae}else{const s=n.slice(0,-1).split("("),i=t[s[0]];return i?e[n]=i(...s[1].split(",")):ae}},nn=(()=>{const n={linear:Qs,irregular:tn,steps:Qi,cubicBezier:Zi};for(let t in je)for(let e in ys){const s=ys[e],i=je[t];n[t+e]=e===Ht||e==="Back"||e==="Elastic"?(r,o)=>i(s(r,o)):i(s)}return n})(),rn={linear:ae},Je=n=>oe(n)?n:xe(n)?sn(n,nn,rn):ae,Ts={},ti=(n,t,e)=>{if(e===b.TRANSFORM){const s=Ns.get(n);return s||n}else if(e===b.CSS||e===b.ATTRIBUTE&&Ws(t)&&n in t.style){const s=Ts[n];if(s)return s;{const i=n&&Pi(n);return Ts[n]=i,i}}else return n},We={deg:1,rad:180/is,turn:360},Cs={},on=(n,t,e,s=!1)=>{const i=t.u,r=t.n;if(t.t===T.UNIT&&i===e)return t;const o=r+i+e,l=Cs[o];if(!v(l)&&!s)t.n=l;else{let h;if(i in We)h=r*We[i]/We[e];else{const c=n.cloneNode(),u=n.parentNode,d=u&&u!==ne?u:ne.body;d.appendChild(c);const m=c.style;m.width=100+i;const y=c.offsetWidth||100;m.width=100+e;const C=c.offsetWidth||100,H=y/C;d.removeChild(c),h=H*r}t.n=h,Cs[o]=h}return t.t,T.UNIT,t.u=e,t},hs=n=>{if(n._hasChildren)_(n,hs,!0);else{const t=n;t.pause(),_(t,e=>{const s=e.property,i=e.target;if(i[es]){const r=i.style,o=t._inlineStyles[s];if(e._tweenType===b.TRANSFORM){const l=i[Fe];if(v(o)||o===Ht?delete l[s]:l[s]=o,e._renderTransforms)if(!Object.keys(l).length)r.removeProperty("transform");else{let h=Ht;for(let a in l)h+=Ds[a]+l[a]+") ";r.transform=h}}else v(o)||o===Ht?r.removeProperty(s):r[s]=o;t._tail===e&&t.targets.forEach(l=>{l.getAttribute&&l.getAttribute("style")===Ht&&l.removeAttribute("style")})}})}return n},g=rs(),x=rs(),Se={func:null},we=[null],Qt=[null,null],_e={to:null};let an=0,Ot,St;const hn=(n,t)=>{const e={};if(ge(n)){const s=[].concat(...n.map(i=>Object.keys(i))).filter(Ee);for(let i=0,r=s.length;i<r;i++){const o=s[i],l=n.map(h=>{const a={};for(let c in h){const u=h[c];Ee(c)?c===o&&(a.to=u):a[c]=u}return a});e[o]=l}}else{const s=I(t.duration,F.defaults.duration);Object.keys(n).map(r=>({o:parseFloat(r)/100,p:n[r]})).sort((r,o)=>r.o-o.o).forEach(r=>{const o=r.o,l=r.p;for(let h in l)if(Ee(h)){let a=e[h];a||(a=e[h]=[]);const c=o*s;let u=a.length,d=a[u-1];const m={to:l[h]};let y=0;for(let C=0;C<u;C++)y+=a[C].duration;u===1&&(m.from=d.to),l.ease&&(m.ease=l.ease),m.duration=c-(u?y:0),a.push(m)}return r});for(let r in e){const o=e[r];let l;for(let h=0,a=o.length;h<a;h++){const c=o[h],u=c.ease;c.ease=l||void 0,l=u}o[0].duration||o.shift()}}return e};class ln extends as{constructor(t,e,s,i,r=!1,o=0,l=0){super(e,s,i);const h=Bi(t),a=h.length,c=e.keyframes,u=c?Xs(hn(c,e),e):e,{delay:d,duration:m,ease:y,playbackEase:C,modifier:H,composition:et,onRender:st}=u,R=s?s.defaults:F.defaults,ct=I(C,R.playbackEase),A=ct?Je(ct):null,ut=!v(y)&&!v(y.ease),ft=ut?y.ease:I(y,A?"linear":R.ease),gt=ut?y.duration:I(m,R.duration),Vt=I(d,R.delay),Gt=H||R.modifier,bt=v(et)&&a>=re?q.none:v(et)?R.composition:et,J={},zt=this._offset+(s?s._offset:0);let it=NaN,L=NaN,pt=0,Dt=0;for(let M=0;M<a;M++){const f=h[M],N=o||M,K=l||a;let jt=NaN,It=NaN;for(let nt in u)if(Ee(nt)){const X=js(f,nt),rt=ti(nt,f,X);let Z=u[nt];const he=ge(Z);if(r&&!he&&(Qt[0]=Z,Qt[1]=Z,Z=Qt),he){const Y=Z.length,dt=!de(Z[0]);Y===2&&dt?(_e.to=Z,we[0]=_e,Ot=we):Y>2&&dt?(Ot=[],Z.forEach((W,$)=>{$?$===1?(Qt[1]=W,Ot.push(Qt)):Ot.push(W):Qt[0]=W})):Ot=Z}else we[0]=Z,Ot=we;let xt=null,ot=null,At=NaN,Et=0,P=0;for(let Y=Ot.length;P<Y;P++){const dt=Ot[P];de(dt)?St=dt:(_e.to=dt,St=_e),Se.func=null;const W=Ft(St.to,f,N,K,Se);let $;de(W)&&!v(W.to)?(St=W,$=W.to):$=W;const Jt=Ft(St.from,f,N,K),vt=St.ease,z=!v(vt)&&!v(vt.ease),Kt=z?vt.ease:vt||ft,k=z?vt.duration:Ft(I(St.duration,Y>1?Ft(gt,f,N,K)/Y:gt),f,N,K),yt=Ft(I(St.delay,P?0:Vt),f,N,K),Tt=Ft(I(St.composition,bt),f,N,K),kt=ss(Tt)?Tt:q[Tt],ve=St.modifier||Gt,Zt=!v(Jt),Mt=!v($),ye=ge($),si=ye||Zt&&Mt,Ne=ot?Et+yt:yt,Ge=zt+Ne;!Dt&&(Zt||ye)&&(Dt=1);let at=ot;if(kt!==q.none){xt||(xt=os(f,rt));let w=xt._head;for(;w&&!w._isOverridden&&w._absoluteStartTime<=Ge;)if(at=w,w=w._nextRep,w&&w._absoluteStartTime>=Ge)for(;w;)Pe(w),w=w._nextRep}if(si?(Ct(ye?Ft($[0],f,N,K):Jt,g),Ct(ye?Ft($[1],f,N,K,Se):$,x),g.t===T.NUMBER&&(at?at._valueType===T.UNIT&&(g.t=T.UNIT,g.u=at._unit):(Ct(le(f,rt,X,J),Ut),Ut.t===T.UNIT&&(g.t=T.UNIT,g.u=Ut.u)))):(Mt?Ct($,x):ot?gs(ot,x):Ct(s&&at&&at.parent.parent===s?at._value:le(f,rt,X,J),x),Zt?Ct(Jt,g):ot?gs(ot,g):Ct(s&&at&&at.parent.parent===s?at._value:le(f,rt,X,J),g)),g.o&&(g.n=$e(at?at._toNumber:Ct(le(f,rt,X,J),Ut).n,g.n,g.o)),x.o&&(x.n=$e(g.n,x.n,x.o)),g.t!==x.t){if(g.t===T.COMPLEX||x.t===T.COMPLEX){const w=g.t===T.COMPLEX?g:x,G=g.t===T.COMPLEX?x:g;G.t=T.COMPLEX,G.s=U(w.s),G.d=w.d.map(()=>G.n)}else if(g.t===T.UNIT||x.t===T.UNIT){const w=g.t===T.UNIT?g:x,G=g.t===T.UNIT?x:g;G.t=T.UNIT,G.u=w.u}else if(g.t===T.COLOR||x.t===T.COLOR){const w=g.t===T.COLOR?g:x,G=g.t===T.COLOR?x:g;G.t=T.COLOR,G.s=w.s,G.d=[0,0,0,1]}}if(g.u!==x.u){let w=x.u?g:x;w=on(f,w,x.u?x.u:g.u,!1)}if(x.d&&g.d&&x.d.length!==g.d.length){const w=g.d.length>x.d.length?g:x,G=w===g?x:g;G.d=w.d.map((Sn,ls)=>v(G.d[ls])?0:G.d[ls]),G.s=U(w.s)}const De=E(+k||S,12),Te={parent:this,id:an++,property:rt,target:f,_value:null,_func:Se.func,_ease:Je(Kt),_fromNumbers:U(g.d),_toNumbers:U(x.d),_strings:U(x.s),_fromNumber:g.n,_toNumber:x.n,_numbers:U(g.d),_number:g.n,_unit:x.u,_modifier:ve,_currentTime:0,_startTime:Ne,_delay:+yt,_updateDuration:De,_changeDuration:De,_absoluteStartTime:Ge,_tweenType:X,_valueType:x.t,_composition:kt,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};kt!==q.none&&Js(Te,xt),isNaN(At)&&(At=Te._startTime),Et=E(Ne+De,12),ot=Te,pt++,Xt(this,Te)}(isNaN(L)||At<L)&&(L=At),(isNaN(it)||Et>it)&&(it=Et),X===b.TRANSFORM&&(jt=pt-P,It=pt)}if(!isNaN(jt)){let nt=0;_(this,X=>{nt>=jt&&nt<It&&(X._renderTransforms=1,X._composition===q.blend&&_(ie.animation,rt=>{rt.id===X.id&&(rt._renderTransforms=1)})),nt++})}}a||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),L?(_(this,M=>{M._startTime-M._delay||(M._delay-=L),M._startTime-=L}),it-=L):L=0,it||(it=S,this.iterationCount=0),this.targets=h,this.duration=it===S?S:Oe((it+this._loopDelay)*this.iterationCount-this._loopDelay)||S,this.onRender=st||R.onRender,this._ease=A,this._delay=L,this.iterationDuration=it,this._inlineStyles=J,!this._autoplay&&Dt&&this.onRender(this)}stretch(t){const e=this.duration;if(e===se(t))return this;const s=t/e;return _(this,i=>{i._updateDuration=se(i._updateDuration*s),i._changeDuration=se(i._changeDuration*s),i._currentTime*=s,i._startTime*=s,i._absoluteStartTime*=s}),super.stretch(t)}refresh(){return _(this,t=>{const e=t._func;if(e){const s=le(t.target,t.property,t._tweenType);Ct(s,Ut),Ct(e(),x),t._fromNumbers=U(Ut.d),t._fromNumber=Ut.n,t._toNumbers=U(x.d),t._strings=U(x.s),t._toNumber=x.n}}),this}revert(){return super.revert(),hs(this)}then(t){return super.then(t)}}const Ss={_head:null,_tail:null},cn=(n,t,e)=>{let s=Ss._head;for(;s;){const i=s._next,r=s.$el===n,o=!t||s.property===t,l=!e||s.parent===e;if(r&&o&&l){const h=s.animation;try{h.commitStyles()}catch{}h.cancel(),Nt(Ss,s);const a=s.parent;a&&(a._completed++,a.animations.length===a._completed&&(a.completed=!0,a.muteCallbacks||(a.paused=!0,a.onComplete(a),a._resolve(a))))}s=i}},ws=(n,t,e)=>{let s=!1;return _(t,i=>{const r=i.target;if(n.includes(r)){const o=i.property,l=i._tweenType,h=ti(e,r,l);(!h||h&&h===o)&&(i.parent._tail===i&&i._tweenType===b.TRANSFORM&&i._prev&&i._prev._tweenType===b.TRANSFORM&&(i._prev._renderTransforms=1),Nt(t,i),Ks(i),s=!0)}},!0),s},ei=(n,t,e)=>{const s=ns(n),i=t||V,r=t&&t.controlAnimation&&t;for(let l=0,h=s.length;l<h;l++){const a=s[l];cn(a,e,r)}let o;if(i._hasChildren){let l=0;_(i,h=>{if(!h._hasChildren)if(o=ws(s,h,e),o&&!h._head)h.cancel(),Nt(i,h);else{const c=h._offset+h._delay+h.duration;c>l&&(l=c)}h._head?ei(n,h,e):h._hasChildren=!1},!0),v(i.iterationDuration)||(i.iterationDuration=l)}else o=ws(s,i,e);return o&&!i._head&&(i._hasChildren=!1,i.cancel&&i.cancel()),s},un=(n,t)=>{if($t(t,"<")){const e=t[1]==="<",s=n._tail,i=s?s._offset+s._delay:0;return e?i:i+s.duration}},Ue=(n,t)=>{let e=n.iterationDuration;if(e===S&&(e=0),v(t))return e;if(ss(+t))return+t;const s=t,i=n?n.labels:null,r=!Ae(i),o=un(n,s),l=!v(o),h=Ei.exec(s);if(h){const a=h[0],c=s.split(a),u=r&&c[0]?i[c[0]]:e,d=l?o:r?u:e,m=+c[1];return $e(d,m,a[0])}else return l?o:r?v(i[s])?e:i[s]:e};function pn(n){return Oe((n.iterationDuration+n._loopDelay)*n.iterationCount-n._loopDelay)||S}function Be(n,t,e,s,i,r){const l=ss(n.duration)&&n.duration<=S?e-S:e;Bt(t,l,1,1,tt.AUTO);const h=s?new ln(s,n,t,l,!1,i,r):new as(n,t,l);return h.init(1),Xt(t,h),_(t,a=>{const u=a._offset+a._delay+a.duration;u>t.iterationDuration&&(t.iterationDuration=u)}),t.duration=pn(t),t}class qe extends as{constructor(t={}){super(t,null,0),this.duration=0,this.labels={};const e=t.defaults,s=F.defaults;this.defaults=e?Xs(e,s):s,this.onRender=t.onRender||s.onRender;const i=I(t.playbackEase,s.playbackEase);this._ease=i?Je(i):null,this.iterationDuration=0}add(t,e,s){const i=de(e),r=de(t);if(i||r){if(this._hasChildren=!0,i){const o=e;if(oe(s)){const l=s,h=ns(t),a=this.duration,c=this.iterationDuration,u=o.id;let d=0;const m=h.length;h.forEach(y=>{const C={...o};this.duration=a,this.iterationDuration=c,v(u)||(C.id=u+"-"+d),Be(C,this,l(y,d,m,this),y,d,m),d++})}else Be(o,this,Ue(this,s),t)}else Be(t,this,Ue(this,e));return this.init(1)}}sync(t,e){if(v(t)||t&&v(t.pause))return this;t.pause();const s=+(t.effect?t.effect.getTiming().duration:t.duration);return this.add(t,{currentTime:[0,s],duration:s,ease:"linear"},e)}set(t,e,s){return v(e)?this:(e.duration=S,e.composition=q.replace,this.add(t,e,s))}call(t,e){return v(t)||t&&!oe(t)?this:this.add({duration:0,onComplete:()=>t(this)},e)}label(t,e){return v(t)||t&&!xe(t)?this:(this.labels[t]=Ue(this,e),this)}remove(t,e){return ei(t,this,e),this}stretch(t){const e=this.duration;if(e===se(t))return this;const s=t/e,i=this.labels;_(this,r=>r.stretch(r.duration*s));for(let r in i)i[r]*=s;return super.stretch(t)}refresh(){return _(this,t=>{t.refresh&&t.refresh()}),this}revert(){return super.revert(),_(this,t=>t.revert,!0),hs(this)}then(t){return super.then(t)}}class dn{scene;constructor(t){this.scene=t}}class mn extends dn{target;targetParams=new Le;position;pathFrom;pathTo;fillColor;fillOpacity;opacity;strokeColor;strokeWidth;constructor(t,e,s,i){super(t),this.target=e,s.position&&i.position&&(this.position=[s.position.clone(),i.position.clone()]),s.strokeWidth&&i.strokeWidth&&(this.strokeWidth=[s.strokeWidth.clone(),i.strokeWidth.clone()]),s.pathFrom!==void 0&&i.pathFrom!==void 0&&(this.pathFrom=[s.pathFrom,i.pathFrom]),s.pathTo!==void 0&&i.pathTo!==void 0&&(this.pathTo=[s.pathTo,i.pathTo]),s.fillColor&&i.fillColor&&(this.fillColor=[s.fillColor.clone(),i.fillColor.clone()]),s.strokeColor&&i.strokeColor&&(this.strokeColor=[s.strokeColor.clone(),i.strokeColor.clone()]),s.fillOpacity!==void 0&&i.fillOpacity!==void 0&&(this.fillOpacity=[s.fillOpacity,i.fillOpacity]),s.opacity!==void 0&&i.opacity!==void 0&&(this.opacity=[s.opacity,i.opacity])}update(t){if(this.position){const e=this.position[0],s=this.position[1];e.changeSpace(s.space,this.scene.activeCamera),this.targetParams.position=new j(ht(e.value.x,s.value.x,t),ht(e.value.y,s.value.y,t),s.space)}if(this.strokeWidth){const e=this.strokeWidth[0],s=this.strokeWidth[1];e.changeSpace(s.space,this.scene.activeCamera),this.targetParams.strokeWidth=new O(ht(e.value,s.value,t),s.space)}this.pathFrom&&(this.targetParams.pathFrom=ht(this.pathFrom[0],this.pathFrom[1],t)),this.pathTo&&(this.targetParams.pathTo=ht(this.pathTo[0],this.pathTo[1],t)),this.fillColor&&(this.targetParams.fillColor=B.lerp(this.fillColor[0],this.fillColor[1],t)),this.strokeColor&&(this.targetParams.strokeColor=B.lerp(this.strokeColor[0],this.strokeColor[1],t)),this.opacity&&(this.targetParams.opacity=ht(this.opacity[0],this.opacity[1],t)),this.fillOpacity&&(this.targetParams.fillOpacity=ht(this.fillOpacity[0],this.fillOpacity[1],t)),this.target.setAnimatableAttributes(this.targetParams).update()}}class _s{attributes;index;constructor(t,e=0){this.attributes=t.clone(),this.index=e}}class fn{scene;currStepIndex=0;timeline;stepTimelines;stepCount=0;statesMap=new Map;constructor(t){this.scene=t,this.timeline=new qe({autoplay:!1}),this.stepTimelines=[new qe({autoplay:!1})]}getSavedParams(t,e){for(let s=t.length-1;s>=0;s--)if(t[s].index<e)return t[s].attributes;return t[0].attributes}getStepCount(){return this.stepCount}saveState(t){return this.statesMap.set(t,[new _s(t.getAnimatableAttributes(),this.currStepIndex-1)]),this}setupStep(t){this.statesMap.forEach((e,s)=>{const i=this.getSavedParams(e,t);s.setAnimatableAttributes(i).update()})}finalize(){this.stepCount=this.currStepIndex;for(const t of this.stepTimelines)this.timeline.sync(t)}makeStep(){this.currStepIndex++,this.stepCount=this.currStepIndex,this.stepTimelines.push(new qe({autoplay:!1}))}getTimeline(){return this.timeline}getStepTimeline(t){return this.stepTimelines[t]}animate(t,e,s){const i=this.statesMap.get(t);if(i===void 0||i.length===0){console.warn("Target not saved.");return}const r=this.getSavedParams(i,this.currStepIndex),o=t.getAnimatableAttributes(),l=new mn(this.scene,t,r,o),h={t:0};this.stepTimelines[this.currStepIndex].add(h,{t:{to:[0,1]},...e,onUpdate:a=>{l.update(h.t)}},s),i.push(new _s(o,this.currStepIndex))}}class gn extends xi{animator;timeline;stepIndex=-1;constructor(t,e){super(t,e),this.animator=new fn(this)}createFullAnimation(){this.timeline&&(this.timeline.pause(),this.timeline.reset()),this.stepIndex=0,this.animator.setupStep(this.stepIndex),this.timeline=this.animator.getTimeline(),this.timeline.play()}createPrevStep(){this.timeline&&(this.timeline.pause(),this.timeline.reset()),this.stepIndex=He(this.stepIndex-1,0,this.animator.getStepCount()),this.animator.setupStep(this.stepIndex),this.timeline=this.animator.getStepTimeline(this.stepIndex)}createNextStep(){this.timeline&&(this.timeline.pause(),this.timeline.reset()),!(this.stepIndex>=this.animator.getStepCount())&&(this.stepIndex=He(this.stepIndex+1,0,this.animator.getStepCount()),this.animator.setupStep(this.stepIndex),this.timeline=this.animator.getStepTimeline(this.stepIndex),this.timeline.restart(),this.timeline.play())}reset(){this.timeline&&(this.timeline.pause(),this.timeline.reset()),this.stepIndex=-1,this.animator.setupStep(this.stepIndex),this.timeline=this.animator.getStepTimeline(this.stepIndex)}play(){this.timeline!==void 0&&(this.animator.setupStep(this.stepIndex),this.timeline.restart(),this.timeline.play())}}const xn=new p(640,360),vn=new ii(new p(0,0),new p(8,4.5),xn,1);class yn{backBase=new Pt({fillColor:Q.GREY_6,strokeColor:Q.GREY_4,strokeWidth:new O(4,"view")});backSlct=new Pt({fillColor:Q.GREY_8,strokeColor:Q.LIGHT_BLUE_6,strokeWidth:new O(4,"view"),textFillColor:Q.WHITE});backExpl=new Pt({fillColor:Q.LIGHT_BLUE_7,strokeColor:Q.LIGHT_BLUE_3,strokeWidth:new O(6,"view"),textFillColor:Q.WHITE});edgeBase=new Pt({strokeColor:Q.GREY_6,strokeWidth:new O(4,"view"),lineCap:"round"});edgeEmph=new Pt({strokeColor:Q.WHITE,strokeWidth:new O(6,"view"),lineCap:"round"});edgeSlct=new Pt({strokeColor:Q.LIGHT_BLUE_6});edgeExpl=new Pt({strokeColor:Q.GREY_7});edgeOpts={startDistance:new O(0,"view"),endDistance:new O(10,"view")};text={fill:oi.WHITE,"font-family":"monospace","font-size":"20px"}}class Tn{root;style;scene;edgeGroup;nodeGroup;levelDistance=1.8;baseSep=.8;nodeRadius=.5;height;center;extents;constructor(t,e,s){this.scene=t,this.style=e,this.edgeGroup=t.addGroup(),this.nodeGroup=t.addGroup(),this.edgeGroup.addClass("btree-edges"),this.nodeGroup.addClass("btree-nodes"),this.height=0,this.root=this.createNodes(s),this.createNodeLines(this.root,null),this.center=new p,this.extents=new p}createNodes(t,e=0){const s=new Cn(this.scene,t.data);if(this.height=Math.max(this.height,e),this.nodeGroup.appendChild(s.s2Node),s.s2Node.setAttributes(this.style.backBase),s.s2Node.setTextStyle(this.style.text),t.left){const i=this.createNodes(t.left,e+1);s.setLeft(i)}if(t.right){const i=this.createNodes(t.right,e+1);s.setRight(i)}return s}createNodeLines(t,e){t!==null&&(e&&(t.parentEdge=this.scene.addLineEdge(e.s2Node,t.s2Node,this.style.edgeOpts,this.edgeGroup).setAttributes(this.style.edgeBase),t.parentEmphEdge=this.scene.addLineEdge(e.s2Node,t.s2Node,this.style.edgeOpts,this.edgeGroup).setAttributes(this.style.edgeEmph).setPathRange(0,0)),this.createNodeLines(t.left,t),this.createNodeLines(t.right,t))}computeLayout(t){this.center.copy(t),this.extents.x=(this.nodeGroup.getChildCount()-1)*this.baseSep,this.extents.y=this.height*this.levelDistance,this.extents.scale(.5),this.computeLayoutRec(this.root,0,0)}computeLayoutRec(t,e,s){return t===null||(e=this.computeLayoutRec(t.left,e,s+1),t.s2Node.setPosition(this.center.x-this.extents.x+e*this.baseSep,this.center.y+this.extents.y-s*this.levelDistance,"world"),e++,e=this.computeLayoutRec(t.right,e,s+1)),e}update(){return this.nodeGroup.update(),this.edgeGroup.update(),this}animateSelectNode(t,e){e.parentEmphEdge&&(e.parentEmphEdge.setPathRange(0,1),t.animate(e.parentEmphEdge,{duration:500,easing:"inOutQuad"},"+=0")),e.s2Node.setAttributes(this.style.backSlct),t.animate(e.s2Node,{duration:300,easing:"inOut"},e.parentEdge?"<-=200":"+=0"),e.left&&e.left.parentEdge&&(e.left.parentEdge.setAttributes(this.style.edgeSlct),t.animate(e.left.parentEdge,{duration:300,easing:"inOut"},"<<")),e.right&&e.right.parentEdge&&(e.right.parentEdge.setAttributes(this.style.edgeSlct),t.animate(e.right.parentEdge,{duration:300,easing:"inOut"},"<<"))}animateExploreNode(t,e){e.s2Node.setAttributes(this.style.backExpl),t.animate(e.s2Node,{duration:300,easing:"inOut"},"+=0")}animateExitParentEdge(t,e){!e.parentEdge||!e.parentEmphEdge||(e.parentEmphEdge.setPathRange(0,0),e.parentEdge.setAttributes(this.style.edgeExpl),t.animate(e.parentEmphEdge,{duration:500,easing:"inOutQuad"},"+=0"),t.animate(e.parentEdge,{duration:300,easing:"inOut"},"<-=200"))}}class Cn{data;parent=null;left=null;right=null;s2Node;parentEdge=null;parentEmphEdge=null;constructor(t,e=0){this.data=e,this.s2Node=t.addNode(),this.s2Node.setTextAlign("center").setTextVerticalAlign("middle"),this.s2Node.setLineHeight(20,16),this.s2Node.setMinExtents(.5,0,"world").setPadding(0,0,"world"),this.s2Node.addLine().addContent(e.toString()),this.s2Node.createCircleBackground()}setLeft(t){this.left=t,t.parent=this}setRight(t){this.right=t,t.parent=this}}class be extends gn{tree;constructor(t,e,s){super(t,vn),this.addFillRect().setFillColor(Q.GREY_8);const i=new yn;switch(this.tree=new Tn(this,i,e),this.tree.computeLayout(new p(0,0)),this.tree.update(),this.update(),this.saveTree(this.tree.root),s){case"in-order":this.createInOrderAnimation(this.tree.root);break;case"pre-order":this.createPreOrderAnimation(this.tree.root);break;case"post-order":this.createPostOrderAnimation(this.tree.root);break}this.animator.finalize()}saveTree(t){t&&(this.animator.saveState(t.s2Node),t.parentEdge&&this.animator.saveState(t.parentEdge),t.parentEmphEdge&&this.animator.saveState(t.parentEmphEdge),this.saveTree(t.left),this.saveTree(t.right))}createInOrderAnimation(t){t&&(this.tree.animateSelectNode(this.animator,t),this.animator.makeStep(),this.createInOrderAnimation(t.left),this.tree.animateExploreNode(this.animator,t),this.animator.makeStep(),this.createInOrderAnimation(t.right),this.tree.animateExitParentEdge(this.animator,t),this.animator.makeStep())}createPreOrderAnimation(t){t&&(this.tree.animateSelectNode(this.animator,t),this.animator.makeStep(),this.tree.animateExploreNode(this.animator,t),this.animator.makeStep(),this.createPreOrderAnimation(t.left),this.createPreOrderAnimation(t.right),this.tree.animateExitParentEdge(this.animator,t),this.animator.makeStep())}createPostOrderAnimation(t){t&&(this.tree.animateSelectNode(this.animator,t),this.animator.makeStep(),this.createPostOrderAnimation(t.left),this.createPostOrderAnimation(t.right),this.tree.animateExploreNode(this.animator,t),this.animator.makeStep(),this.tree.animateExitParentEdge(this.animator,t),this.animator.makeStep())}updateCamera(){this.update(),this.tree.update()}}const Ke=document.querySelector("#app");Ke&&(Ke.innerHTML=`
        <div>
            <h1>Parcours d'un arbre binaire</h1>
            <svg xmlns="http://www.w3.org/2000/svg" id="test-svg" class="responsive-svg" preserveAspectRatio="xMidYMid meet"></svg>
            <div class="figure-nav">
                <select id="order-select">
                    <option value="pre-order">Préfixe</option>
                    <option value="in-order">Infixe</option>
                    <option value="post-order">Suffixe</option>
                </select>
                <button id="reset-button"><i class="fa-solid fa-backward-fast"></i></button>
                <button id="prev-button"><i class="fa-solid fa-step-backward"></i></button>
                <button id="play-button"><i class="fa-solid fa-redo"></i></button>
                <button id="next-button"><i class="fa-solid fa-step-forward"></i></button>
                <button id="full-button"><i class="fa-solid fa-play"></i></button>
            </div>
        </div>`);const ue=Ke?.querySelector("#test-svg");if(ue){const n={data:0,left:{data:1,left:{data:3,right:{data:7}},right:{data:4,left:{data:8}}},right:{data:2,left:{data:5,left:{data:9},right:{data:10}},right:{data:6,left:{data:11}}}};let t=new be(ue,n,"pre-order");document.querySelector("#reset-button")?.addEventListener("click",()=>{t.reset()}),document.querySelector("#prev-button")?.addEventListener("click",()=>{t.createPrevStep()}),document.querySelector("#next-button")?.addEventListener("click",()=>{t.createNextStep()}),document.querySelector("#play-button")?.addEventListener("click",()=>{t.play()}),document.querySelector("#full-button")?.addEventListener("click",()=>{t.createFullAnimation()}),document.getElementById("order-select").addEventListener("change",s=>{switch(s.target.value){case"in-order":t=new be(ue,n,"in-order");break;case"pre-order":t=new be(ue,n,"pre-order");break;case"post-order":default:t=new be(ue,n,"post-order");break}})}
